"use strict";(self.webpackChunkzalo_client_rebuild=self.webpackChunkzalo_client_rebuild||[]).push([[680],{44690:function(e,t,n){n.r(t),n.d(t,{AppContext:function(){return Kn},default:function(){return Vn},useIsMediaPath:function(){return Gn}});var i=n(74165),s=n(15861),r=n(70885),a=n(61044),o=n(72791),d=n(57689),l=n(78820),u=n(39126),c=n(7692),v=n(11087),f=n(80184),h=function(){return(0,f.jsx)("div",{className:"dmnklsasjadhsjkdans",style:{position:"fixed",top:0,left:0,display:"flex",justifyContent:"center",alignItems:"center",zIndex:-1,width:"100%"},children:(0,f.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMinYMin slice",viewBox:"0 0 1440 810",style:{minHeight:"100vh",width:"100%"},children:[(0,f.jsx)("path",{fill:"#aad6ff",d:"M592.66 0c-15 64.092-30.7 125.285-46.598 183.777C634.056 325.56 748.348 550.932 819.642 809.5h419.672C1184.518 593.727 1083.124 290.064 902.637 0H592.66z"}),(0,f.jsx)("path",{fill:"#e8f3ff",d:"M545.962 183.777c-53.796 196.576-111.592 361.156-163.49 490.74 11.7 44.494 22.8 89.49 33.1 134.883h404.07c-71.294-258.468-185.586-483.84-273.68-625.623z"}),(0,f.jsx)("path",{fill:"#cee7ff",d:"M153.89 0c74.094 180.678 161.088 417.448 228.483 674.517C449.67 506.337 527.063 279.465 592.56 0H153.89z"}),(0,f.jsx)("path",{fill:"#e8f3ff",d:"M153.89 0H0v809.5h415.57C345.477 500.938 240.884 211.874 153.89 0zM1144.22 501.538c52.596-134.583 101.492-290.964 134.09-463.343 1.2-6.1 2.3-12.298 3.4-18.497 0-.2.1-.4.1-.6 1.1-6.3 2.3-12.7 3.4-19.098H902.536c105.293 169.28 183.688 343.158 241.684 501.638v-.1z"}),(0,f.jsx)("path",{fill:"#eef4f8",d:"M1285.31 0a2161.05 2161.05 0 01-6.9 38.195C1321.507 86.39 1379.603 158.98 1440 257.168V0h-154.69z"}),(0,f.jsx)("path",{fill:"#e8f3ff",d:"M1278.31 38.196c-32.5 171.678-81.09 327.36-133.49 461.642v3.8c41 112.286 71.59 216.573 94.29 305.962l200.59.4V256.768c-60.3-97.988-118.29-170.48-161.39-218.573v.001z"})]})})},p={container:"Signup_container__Sjshi",register:"Signup_register__ceZg8",btn:"Signup_btn__T6eON",toLogin:"Signup_toLogin__xHud6",error:"Signup_error__bIDh5"},j=n(88329),x=n(17406),m=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n){var s,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:"".concat(x.LB,"/user/login"),method:"post",data:{phoneNumber:t,password:n}});case 2:return s=e.sent,e.next=5,s.data;case 5:return r=e.sent,200===parseInt(s.status)&&!0===(null===r||void 0===r?void 0:r.login)&&(j.Z.set("uid",r.user._id),j.Z.set("accessToken",r.accessToken),window.location.href=window.location.origin),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=m,k=n(58518),y=function(e){var t=(0,d.s0)(),n=(0,o.useState)(!1),a=(0,r.Z)(n,2),j=a[0],x=a[1],m=(0,o.useState)((function(){return""})),y=(0,r.Z)(m,2),Z=y[0],b=y[1],w=(0,o.useState)((function(){return""})),C=(0,r.Z)(w,2),_=C[0],N=C[1],I=(0,k.Ds)().enqueueSnackbar;return(0,f.jsxs)("div",{className:p.container,children:[(0,f.jsx)("div",{className:p.register,children:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:p.register_title,style:{marginBottom:20,fontSize:18},children:["\u0110\u0103ng nh\u1eadp t\xe0i kho\u1ea3n tin nh\u1eafn nhanh ",(0,f.jsx)("br",{}),"\u0111\u1ec3 k\u1ebft n\u1ed1i v\u1edbi \u1ee9ng d\u1ee5ng tin nh\u1eafn nhanh Chat"]}),(0,f.jsxs)("form",{action:"#",children:[(0,f.jsxs)("div",{className:p.register_form_input,children:[(0,f.jsx)("input",{type:"text",placeholder:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ho\u1eb7c email",onChange:function(e){return b(e.target.value)},autoComplete:"off"}),(0,f.jsx)("span",{children:(0,f.jsx)(u.N9W,{})})]}),(0,f.jsxs)("div",{style:{position:"relative"},className:p.register_form_input,children:[(0,f.jsx)("input",{type:!0===j?"text":"password",placeholder:"M\u1eadt kh\u1ea9u",required:!0,onChange:function(e){return N(e.target.value)},autoComplete:"off"}),(0,f.jsxs)("span",{children:[" ",(0,f.jsx)(l.R9j,{})]}),(0,f.jsxs)("span",{style:{position:"absolute",left:"100%",top:"50%",transform:"translate(-100%, -50%)"},children:[!1===j&&(0,f.jsx)(c.nJ9,{onClick:function(){return x(!0)}}),!0===j&&(0,f.jsx)(c.lsl,{onClick:function(){return x(!1)}})]})]}),(0,f.jsx)("button",{onClick:(0,s.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(Z,_);case 2:t=e.sent,400!==parseInt(null===t||void 0===t?void 0:t.status)&&500!==parseInt(null===t||void 0===t?void 0:t.status)||I(null===t||void 0===t?void 0:t.msg,{variant:"error"});case 4:case"end":return e.stop()}}),e)}))),className:p.btn,style:{fontSize:16},children:"\u0110\u0103ng nh\u1eadp"}),(0,f.jsx)("div",{onClick:function(){return t("/forgot-password")},style:{width:"100%",textAlign:"right",fontSize:14,cursor:"pointer"},children:"Qu\xean m\u1eadt kh\u1ea9u"}),(0,f.jsx)("div",{className:p.toLogin,children:(0,f.jsx)(v.rU,{style:{fontSize:16},to:"/signup",children:"\u0110\u0103ng k\xfd"})})]})]})}),(0,f.jsx)(h,{})]})},Z=n(56355),b=(n(81724),function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n,s,r,o){var d,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:"".concat(x.LB,"/user/register"),method:"post",data:{username:t,phoneNumber:n,password:s,email:r}});case 2:return d=e.sent,e.next=5,d.data;case 5:return l=e.sent,200===d.status&&(window.location.href=window.location.origin+"/login"),e.abrupt("return",o(l));case 8:case"end":return e.stop()}}),e)})));return function(t,n,i,s,r){return e.apply(this,arguments)}}()),w=b,C=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n){var s,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:x.LB+"/api/auth/check-user",method:"post",data:{email:t,phoneNumber:null===n||void 0===n?void 0:n.toString()}});case 2:return s=e.sent,e.next=5,s.data;case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=C,N=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n,s){var r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:x.LB+"/api/auth/send-sms",method:"post",data:{email:t,type:s||!1}});case 2:return r=e.sent,e.next=5,r.data;case 5:return o=e.sent,e.abrupt("return",n(o));case 7:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),I=N,S=n(87908),B=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n,s){var r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:x.LB+"/api/auth/confirm_code",method:"post",data:{email:t,code_verify:null===n||void 0===n?void 0:n.toString()}});case 2:return r=e.sent,e.next=5,r.data;case 5:return o=e.sent,e.abrupt("return",s(o));case 7:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),P=B,T=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n,s){var r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:x.LB+"/api/auth/reset-password",method:"post",data:{email:t,password:null===n||void 0===n?void 0:n.toString()}});case 2:return r=e.sent,e.next=5,r.data;case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),z=T,R=n(62062),F=n.n(R);function A(e){return!!/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,16}$/.test(e)}var L=(0,o.memo)((function(e){var t=e.status,n=(0,k.Ds)().enqueueSnackbar;return(0,f.jsx)("div",{style:{display:"none"},children:!1===(null===t||void 0===t?void 0:t.verify)&&n("M\xe3 x\xe1c th\u1ef1c kh\xf4ng ch\xednh x\xe1c",{variant:"error"})})})),O=function(e){var t=(0,d.s0)(),n=(0,k.Ds)().enqueueSnackbar,a=(0,o.useState)(),c=(0,r.Z)(a,2),v=c[0],j=c[1],x=(0,o.useState)(),m=(0,r.Z)(x,2),g=m[0],y=m[1],Z=(0,o.useState)((function(){return""})),b=(0,r.Z)(Z,2),w=b[0],C=b[1],_=(0,o.useState)(),N=(0,r.Z)(_,2),B=N[0],T=N[1],R=(0,o.useState)(),O=(0,r.Z)(R,2),E=O[0],M=O[1],D=(0,o.useState)(),W=(0,r.Z)(D,2),q=W[0],U=W[1];return(0,f.jsxs)("div",{className:p.container,children:[(0,f.jsx)("div",{className:p.register,children:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:p.register_title,style:{marginBottom:20,fontSize:24},children:["Qu\xean m\u1eadt kh\u1ea9u ",(0,f.jsx)("br",{})]}),(0,f.jsxs)("form",{action:"#",children:[!v&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:p.register_form_input,children:[(0,f.jsx)("input",{type:"email",placeholder:"Nh\u1eadp email c\u1ee7a b\u1ea1n \u0111\u1ec3 kh\xf4i ph\u1ee5c m\u1eadt kh\u1ea9u",onChange:function(e){return C(e.target.value)},autoComplete:"off"}),(0,f.jsx)("span",{children:(0,f.jsx)(u.N9W,{})})]}),(0,f.jsx)("div",{className:"fjkadjksjksjdasaa",children:(0,f.jsx)(S.Z,{onClick:function(){var e;if((null===w||void 0===w||null===(e=w.trim())||void 0===e?void 0:e.length)<=0)return F()("Th\xf4ng b\xe1o","B\u1ea1n ph\u1ea3i \u0111i\u1ec1n email \u0111\u1ec3 ti\u1ebfp t\u1ee5c","error");I(w,j)},children:"G\u1eedi"})})]}),v&&(0,f.jsxs)("div",{className:"gjldajfskdjsjsa",children:[(0,f.jsx)("div",{className:"jksdjklsdjkasasas",style:{fontSize:12},children:null===v||void 0===v?void 0:v.message}),(0,f.jsxs)("div",{className:p.register_form_input,children:[(0,f.jsx)("input",{type:"text",placeholder:"Nh\u1eadp m\xe3 x\xe1c th\u1ef1c \u0111\u1ec3 kh\xf4i ph\u1ee5c m\u1eadt kh\u1ea9u",onChange:function(e){return y(e.target.value)},autoComplete:"off"}),(0,f.jsx)("span",{children:(0,f.jsx)(u.vcz,{})})]}),(0,f.jsx)("div",{className:"".concat(p.register_form_input," fjkadjksjksjdasaa"),children:(0,f.jsx)(S.Z,{onClick:function(){return P(w,g,T)},color:"primary",children:"G\u1eedi"})}),!0===(null===B||void 0===B?void 0:B.verify)&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{style:{fontSize:12,textAlign:"left"},children:"M\u1eadt kh\u1ea9u ph\u1ea3i c\xf3 \xedt nh\u1ea5t 8 k\xfd t\u1ef1 g\u1ed3m c\xf3 1 ch\u1eef s\u1ed1, 1 ch\u1eef vi\u1ebft hoa, 1 ch\u1eef vi\u1ebft th\u01b0\u1eddng v\xe0 1 k\xfd t\u1ef1 \u0111\u1eb7c bi\u1ec7t"}),(0,f.jsxs)("div",{className:p.register_form_input,children:[(0,f.jsx)("input",{type:"password",placeholder:"M\u1eadt kh\u1ea9u",required:!0,onChange:function(e){return M(e.target.value)}}),(0,f.jsxs)("span",{children:[" ",(0,f.jsx)(l.R9j,{})]})]}),(0,f.jsxs)("div",{className:p.register_form_input,children:[(0,f.jsx)("input",{type:"password",placeholder:"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u",required:!0,onChange:function(e){return U(e.target.value)}}),(0,f.jsxs)("span",{children:[" ",(0,f.jsx)(l.R9j,{})]})]}),(0,f.jsx)("div",{className:"fjkadjksjksjdasaa",children:(0,f.jsx)(S.Z,{onClick:(0,s.Z)((0,i.Z)().mark((function e(){var s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((null===E||void 0===E||null===(s=E.trim())||void 0===s?void 0:s.length)<=0)){e.next=4;break}n("Kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng m\u1eadt kh\u1ea9u",{variant:"error"}),e.next=12;break;case 4:if(E===q){e.next=9;break}return n("X\xe1c th\u1ef1c m\u1eadt kh\u1ea9u kh\xf4ng kh\u1edbp",{variant:"error"}),e.abrupt("return");case 9:if(!1!==A(null===E||void 0===E?void 0:E.trim())){e.next=12;break}return n("M\u1eadt kh\u1ea9u qu\xe1 y\u1ebfu, m\u1eadt kh\u1ea9u ph\u1ea3i c\xf3 \xedt nh\u1ea5t 8 k\xed t\u1ef1, \xedt nh\u1ea5t m\u1ed9t ch\u1eef th\u01b0\u1eddng, m\u1ed9t ch\u1eef hoa v\xe0 m\u1ed9t ch\u1eef s\u1ed1",{variant:"error"}),e.abrupt("return");case 12:return e.next=14,z(w,E,t);case 14:F()("Th\xf4ng b\xe1o","B\u1ea1n \u0111\xe3 c\u1eadp nh\u1eadt m\u1eadt kh\u1ea9u th\xe0nh c\xf4ng","success").then((function(){return t("/login")}));case 15:case"end":return e.stop()}}),e)}))),className:"fjkadjksjksjdasaa",color:"primary",children:"C\u1eadp nh\u1eadt"})})]}),(0,f.jsx)(L,{status:B})]})]})]})}),(0,f.jsx)(h,{})]})};var E=function(){var e=(0,k.Ds)().enqueueSnackbar,t=(0,o.useState)((function(){return""})),n=(0,r.Z)(t,2),a=n[0],d=n[1],j=(0,o.useState)((function(){return""})),x=(0,r.Z)(j,2),m=x[0],g=x[1],y=(0,o.useState)((function(){return""})),b=(0,r.Z)(y,2),w=b[0],C=b[1],N=(0,o.useState)((function(){return""})),B=(0,r.Z)(N,2),T=B[0],z=B[1],R=(0,o.useState)((function(){return""})),F=(0,r.Z)(R,2),O=F[0],E=F[1],D=(0,o.useState)(),W=(0,r.Z)(D,2),q=(W[0],W[1]),U=(0,o.useState)(),H=(0,r.Z)(U,2),G=H[0],K=H[1],V=(0,o.useState)(),Q=(0,r.Z)(V,2),Y=Q[0],X=Q[1],$=(0,o.useState)(),J=(0,r.Z)($,2),ee=J[0],te=J[1],ne=(0,o.useState)(),ie=(0,r.Z)(ne,2),se=ie[0],re=ie[1],ae=(0,o.useState)(!1),oe=(0,r.Z)(ae,2),de=oe[0],le=oe[1],ue=(0,o.useState)(!1),ce=(0,r.Z)(ue,2),ve=ce[0],fe=ce[1],he=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(T,m);case 2:!0===(null===(t=e.sent)||void 0===t?void 0:t.msg)?(K(!0),I(T,X,!0)):K(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,f.jsxs)("div",{className:p.container,children:[(0,f.jsx)("div",{className:p.register,children:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:p.register_title,style:{marginBottom:20,fontSize:18},children:["\u0110\u0103ng k\xfd t\xe0i kho\u1ea3n tin nh\u1eafn nhanh ",(0,f.jsx)("br",{}),"\u0111\u1ec3 k\u1ebft n\u1ed1i v\u1edbi \u1ee9ng d\u1ee5ng tin nh\u1eafn nhanh"]}),(0,f.jsxs)("form",{action:"#",children:[!0===G&&(0,f.jsx)(f.Fragment,{children:Y&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{style:{textAlign:"center",fontSize:12},children:"Ch\xfang t\xf4i \u0111\xe3 g\u1eedi m\u1ed9t m\xe3 x\xe1c th\u1ef1c g\u1ed3m 6 ch\u1eef s\u1ed1 \u0111\u1ebfn email c\u1ee7a b\u1ea1n. Vui l\xf2ng nh\u1eadp v\xe0o \u0111\xe2y \u0111\u1ec3 ho\xe0n t\u1ea5t qu\xe1 tr\xecnh \u0111\u0103ng k\xfd"}),(0,f.jsx)("input",{onChange:function(e){return te(e.target.value)},type:"text",placeholder:"Nh\u1eadp m\xe3 x\xe1c th\u1ef1c"}),(0,f.jsx)("br",{}),(0,f.jsx)(S.Z,{color:"primary",onClick:function(){return P(T,ee,re)},children:"X\xe1c nh\u1eadn"}),(0,f.jsx)(L,{status:se}),!0===(null===se||void 0===se?void 0:se.verify)&&(0,f.jsx)(M,{username:a,phoneNumber:m,password:w,email:T,setData:q})]})}),!G&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:p.register_form_input,children:[(0,f.jsx)("input",{onChange:function(e){return d(e.target.value)},type:"text",placeholder:"H\u1ecd v\xe0 t\xean"}),(0,f.jsxs)("span",{children:[" ",(0,f.jsx)(Z.q1E,{})]})]}),(0,f.jsxs)("div",{className:p.register_form_input,children:[(0,f.jsx)("input",{onChange:function(e){return g(e.target.value)},type:"text",placeholder:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),(0,f.jsx)("span",{children:(0,f.jsx)(u.N9W,{})})]}),(0,f.jsxs)("div",{className:p.register_form_input,children:[(0,f.jsx)("input",{onChange:function(e){return z(e.target.value)},type:"email",placeholder:"Email"}),(0,f.jsx)("span",{children:(0,f.jsx)(l.Dme,{})})]}),(0,f.jsx)("div",{style:{fontSize:12,textAlign:"left"},children:"M\u1eadt kh\u1ea9u ph\u1ea3i c\xf3 \xedt nh\u1ea5t 8 k\xfd t\u1ef1 bao g\u1ed3m \xedt nh\u1ea5t 1 ch\u1eef s\u1ed1, 1 ch\u1eef th\u01b0\u1eddng, 1 ch\u1eef vi\u1ebft hoa v\xe0 1 k\xfd t\u1ef1 \u0111\u1eb7c bi\u1ec7t"}),(0,f.jsxs)("div",{style:{position:"relative"},className:p.register_form_input,children:[(0,f.jsx)("input",{type:!0===de?"text":"password",placeholder:"M\u1eadt kh\u1ea9u",required:!0,onChange:function(e){return C(e.target.value)}}),(0,f.jsxs)("span",{children:[" ",(0,f.jsx)(l.R9j,{})]}),(0,f.jsxs)("span",{style:{position:"absolute",left:"100%",top:"50%",transform:"translate(-100%, -50%)"},children:[!1===de&&(0,f.jsx)(c.nJ9,{onClick:function(){return le(!0)}}),!0===de&&(0,f.jsx)(c.lsl,{onClick:function(){return le(!1)}})]})]}),(0,f.jsxs)("div",{className:p.register_form_input,children:[(0,f.jsx)("input",{type:!0===ve?"text":"password",placeholder:"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u",required:!0,onChange:function(e){return E(e.target.value)}}),(0,f.jsxs)("span",{children:[" ",(0,f.jsx)(l.R9j,{})]}),(0,f.jsxs)("span",{style:{position:"absolute",left:"100%",top:"50%",transform:"translate(-100%, -50%)"},children:[!1===ve&&(0,f.jsx)(c.nJ9,{onClick:function(){return fe(!0)}}),!0===ve&&(0,f.jsx)(c.lsl,{onClick:function(){return fe(!1)}})]})]}),(0,f.jsx)("div",{children:!1===G&&(0,f.jsx)("div",{style:{color:"red",fontSize:12},children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ho\u1eb7c gmail \u0111\xe3 t\u1ed3n t\u1ea1i vui l\xf2ng th\u1eed l\u1ea1i"})}),(0,f.jsx)("button",{onClick:function(){(null===a||void 0===a?void 0:a.length)<=6?e("H\u1ecd t\xean \xedt nh\u1ea5t ph\u1ea3i c\xf3 6 k\xfd t\u1ef1",{variant:"error"}):!1===function(e){return!!/^(\+?\d{1,3}[- ]?)?\d{10}$/.test(e)}(m)?e("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7, ph\u1ea3i c\xf3 10 ch\u1eef s\u1ed1",{variant:"error"}):!1===function(e){return!!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}(T)?e("Email kh\xf4ng h\u1ee3p l\u1ec7",{variant:"error"}):!1===A(w)?e("M\u1eadt kh\u1ea9u ph\u1ea3i c\xf3 \xedt nh\u1ea5t 8 k\xed t\u1ef1, \xedt nh\u1ea5t m\u1ed9t ch\u1eef th\u01b0\u1eddng, m\u1ed9t ch\u1eef hoa v\xe0 m\u1ed9t ch\u1eef s\u1ed1",{variant:"error"}):!1===function(e,t){return e===t}(w,O)?e("M\u1eadt kh\u1ea9u kh\xf4ng kh\u1edbp",{variant:"error"}):he()},className:p.btn,children:"\u0110\u0103ng k\xfd"})]}),(0,f.jsx)("div",{className:p.toLogin,children:(0,f.jsx)(v.rU,{style:{fontSize:16},to:"/login",children:"\u0110\u0103ng nh\u1eadp!"})})]})]})}),(0,f.jsx)(h,{})]})},M=function(e){var t=(0,d.s0)();return(0,o.useEffect)((function(){e&&(0,s.Z)((0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w(null===e||void 0===e?void 0:e.username,null===e||void 0===e?void 0:e.phoneNumber,null===e||void 0===e?void 0:e.password,null===e||void 0===e?void 0:e.email,null===e||void 0===e?void 0:e.setData);case 2:t("/login");case 3:case"end":return n.stop()}}),n)})))()}),[t,e]),(0,f.jsx)(f.Fragment,{})},D=n(1413),W=n(44428),q=(0,o.createContext)(),U=function(e){var t=e.children,n=(0,o.useState)(),i=(0,r.Z)(n,2),s=i[0],a=i[1],d=(0,o.useState)(""),l=(0,r.Z)(d,2),u=l[0],c=l[1];return(0,o.useEffect)((function(){var e=(0,W.io)("".concat(x.LB),[{transports:["websocket"]}]);return e.on("me",(function(e){c(e)})),a(e),function(){return e.disconnect()}}),[]),(0,f.jsx)(q.Provider,{value:{socketState:s,meSocket:u},children:t})},H=function(e){var t=(0,o.useContext)(q).socketState;return(0,o.useEffect)((function(){var e=document.createElement("audio");return e.autoplay=!0,e.src="https://res.cloudinary.com/cockbook/video/upload/v1673162350/single/Facebook_Messenger_Call_iysnpd.mp3",e.loop=!0,function(){e.src=void 0}}),[]),(0,f.jsx)("div",{className:"c-flex-center",style:{width:"100%",position:"fixed",top:0,left:0,height:"100%",zIndex:999,background:"rgba(0,0 ,0 ,0.3)"},children:(0,f.jsxs)("div",{style:{padding:16,borderRadius:10,border:"1px solid #d9d9d9",background:"#fff"},children:[(0,f.jsx)("div",{style:{width:"100%"},className:"c-flex-center",children:(0,f.jsx)("img",{src:null===e||void 0===e?void 0:e.profilePicture,style:{width:60,height:60,borderRadius:"50%",objectFit:"cover"},alt:""})}),(0,f.jsx)("div",{style:{marginTop:4,textAlign:"center",fontSize:24,fontWeight:600},children:null===e||void 0===e?void 0:e.username}),(0,f.jsx)("div",{style:{marginTop:8,textAlign:"center",fontSize:14},children:"Cu\u1ed9c g\u1ecdi s\u1ebd b\u1eaft \u0111\u1ea7u khi b\u1ea1n ch\u1ea5p nh\u1eadn"}),(0,f.jsxs)("div",{style:{marginTop:12,gap:36},className:"c-flex-center",children:[(0,f.jsxs)("div",{onClick:function(){null===e||void 0===e||e.setInComingCall((function(){return!1})),t.emit("decline_call",{call_id:null===e||void 0===e?void 0:e.call_id})},className:"c-flex-center",style:{flexDirection:"column",cursor:"pointer"},children:[(0,f.jsx)("div",{style:{width:40,height:40,borderRadius:"50%",background:"#ff443d"},className:"c-flex-center",children:(0,f.jsx)(l.oHP,{style:{color:"#fff",width:24,height:24}})}),(0,f.jsx)("div",{style:{fontSize:12,marginTop:8},children:"T\u1eeb ch\u1ed1i"})]}),(0,f.jsxs)("div",{onClick:function(){null===e||void 0===e||e.setInComingCall((function(){return!1})),t.emit("accept_call",{call_id:null===e||void 0===e?void 0:e.call_id})},className:"c-flex-center",style:{flexDirection:"column",cursor:"pointer"},children:[(0,f.jsx)("div",{style:{width:40,height:40,borderRadius:"50%",background:"#31cc46"},className:"c-flex-center",children:(0,f.jsx)(u.dKm,{style:{color:"#fff",width:24,height:24}})}),(0,f.jsx)("div",{style:{fontSize:12,marginTop:8},children:"Ch\u1ea5p nh\u1eadn"})]})]})]})})},G=function(){return(0,f.jsxs)("div",{className:"not-found",children:[(0,f.jsx)("h1",{children:"404 - Kh\xf4ng t\xecm th\u1ea5y trang"}),(0,f.jsx)("p",{children:"Xin l\u1ed7i, trang b\u1ea1n \u0111ang t\xecm ki\u1ebfm kh\xf4ng t\u1ed3n t\u1ea1i!"}),(0,f.jsx)(v.rU,{to:"/",children:"Quay l\u1ea1i trang ch\u1ee7"})]})},K=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n){var s,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:x.LB+"/api/conversations/get-files/"+t,method:"get",headers:{authorization:"Bearer "+j.Z.get("accessToken")}});case 2:return s=e.sent,e.next=5,s.data;case 5:return r=e.sent,e.abrupt("return",n(r));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),V=K,Q=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n){var s,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:x.LB+"/api/conversations/detail/"+t,method:"get",headers:{authorization:"Bearer "+j.Z.get("accessToken")}});case 2:return s=e.sent,e.next=5,s.data;case 5:return r=e.sent,e.abrupt("return",n(r));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Y=Q,X=n(42982),$=n(76053),J=n(96211),ee=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n,s){var r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:x.LB+"/api/conversations/add-member-group/"+t,method:"post",headers:{authorization:"Bearer "+j.Z.get("accessToken")},data:{member:n}});case 2:return r=e.sent,e.next=5,r.data;case 5:return o=e.sent,e.abrupt("return",s(o));case 7:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),te=ee,ne=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n){var s,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:x.LB+"/api/conversations/friend/"+t,method:"post",data:{userId:j.Z.get("uid")},headers:{authorization:"Bearer "+j.Z.get("accessToken")}});case 2:return s=e.sent,e.next=5,s.data;case 5:return r=e.sent,e.abrupt("return",n(r));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ie=ne,se=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n){var s,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:x.LB+"/api/conversations/out-group/"+t,method:"post",headers:{authorization:"Bearer "+j.Z.get("accessToken")},data:{userId:j.Z.get("uid")}});case 2:return s=e.sent,e.next=5,s.data;case 5:return r=e.sent,console.log(r),window.location.href=window.location.origin,e.abrupt("return",n((function(e){return!e})));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),re=se,ae=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n){var s,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:"".concat(x.LB,"/api/users/request-add-friend/").concat(t),method:"post",headers:{authorization:"Bearer "+j.Z.get("accessToken")},data:{userId:j.Z.get("uid")}});case 2:return s=e.sent,e.next=5,s.data;case 5:return r=e.sent,e.abrupt("return",n(r));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),oe=ae,de=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n,s){var r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:x.LB+"/api/messages/"+t,method:"get",headers:{authorization:"Bearer "+j.Z.get("accessToken")},params:(0,D.Z)({},s)});case 2:return r=e.sent,e.next=5,r.data;case 5:return o=e.sent,e.abrupt("return",n(o.data));case 7:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),le=de,ue=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n){var s,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:"".concat(x.LB,"/api/users/phone/").concat(t),headers:{authorization:"Bearer "+j.Z.get("accessToken")},method:"get"});case 2:return s=e.sent,e.next=5,s.data;case 5:return r=e.sent,e.abrupt("return",n(r));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ce=ue,ve=function(e){var t=(0,o.useState)(),n=(0,r.Z)(t,2),i=n[0],s=n[1],a=!!i;return(0,f.jsx)("div",{className:"sjdkajdkjfadas",style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,f.jsxs)("div",{onClick:function(){return e.setOpen((function(e){return!e}))},className:"sdsjfkjdkaldjas",style:{width:60,height:60,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",background:"#fff",position:"relative",cursor:"pointer"},children:[!0===a?(0,f.jsx)("img",{src:i.preview||"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png",alt:"Open",className:"dsjkhjfsjkfjkdlas",style:{display:"flex",justifyContent:"center",alignItems:"center",objectFit:"cover",width:"100%",height:"100%",position:"relative",zIndex:12,borderRadius:"50%"}}):(0,f.jsx)("img",{src:e.avatar||"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png",alt:"Open",className:"dsjkhjfsjkfjkdlas",style:{display:"flex",justifyContent:"center",alignItems:"center",objectFit:"cover",width:"100%",height:"100%",position:"relative",zIndex:12,borderRadius:"50%"}}),!0===(null===e||void 0===e?void 0:e.is_edit)&&(0,f.jsxs)("div",{className:"fkdlksdklsdcvx",style:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",right:0,bottom:0,zIndex:13,cursor:"pointer"},children:[(0,f.jsx)(l.hOO,{}),(0,f.jsx)("input",{onChange:function(t){s({img:t.target.files[0],preview:URL.createObjectURL(t.target.files[0]),key:t.target.files[0].lastModified}),e.setNewProfilePicture(t.target.files[0]),null!==e&&void 0!==e&&e.setChangeAvatar&&(null===e||void 0===e||e.setChangeAvatar((function(){return!0})))},type:"file",title:"Ch\u1ecdn \u1ea3nh \u0111\u1ea1i di\u1ec7n c\u1ee7a b\u1ea1n",style:{width:"100%",height:"100%",position:"absolute",opacity:0,zIndex:14,cursor:"pointer"}})]})]})})},fe=(0,o.memo)(ve),he=function(e){var t,n=(0,o.useState)(),i=(0,r.Z)(n,2),s=i[0],a=i[1],d=!!s,u=function(t){a({img:t.target.files[0],preview:URL.createObjectURL(t.target.files[0]),key:t.target.files[0].lastModified}),null===e||void 0===e||e.setNewCoverPhoto(t.target.files[0]),null!==e&&void 0!==e&&e.setChangeCoverPhoto&&(null===e||void 0===e||e.setChangeCoverPhoto(!0))};return(0,f.jsx)("div",{className:"fjlkdajsklfjdskass",style:{width:"100%",position:"relative",height:120},children:!0===d?(0,f.jsx)("div",{className:"jfdjfkdjdsklfdjdaklsa",style:{width:"100%",height:150,backgroundImage:"url(".concat(null===s||void 0===s?void 0:s.preview,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",position:"absolute",top:0,left:0},children:!0===(null===e||void 0===e?void 0:e.is_edit)&&(0,f.jsxs)("div",{className:"fkdlksdklsdcvx",style:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",right:0,bottom:0,zIndex:13,cursor:"pointer"},children:[(0,f.jsx)(l.hOO,{size:30,style:{padding:5,backgroundColor:"#fff",borderRadius:"50%"}}),(0,f.jsx)("input",{onChange:u,type:"file",title:"Ch\u1ecdn \u1ea3nh b\xeca c\u1ee7a b\u1ea1n",style:{width:"100%",height:"100%",position:"absolute",opacity:0,zIndex:14,cursor:"pointer"}})]})}):(0,f.jsx)("div",{className:"jfdjfkdjdsklfdjdaklsa",style:{width:"100%",height:150,backgroundImage:"url(".concat((null===e||void 0===e||null===(t=e.coverPhoto)||void 0===t?void 0:t.length)>0?null===e||void 0===e?void 0:e.coverPhoto:"https://cover-talk.zadn.vn/default",")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",position:"absolute",top:0,left:0},children:!0===(null===e||void 0===e?void 0:e.is_edit)&&(0,f.jsxs)("div",{className:"fkdlksdklsdcvx",style:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",right:0,bottom:0,zIndex:13,cursor:"pointer"},children:[(0,f.jsx)(l.hOO,{size:30,style:{padding:5,backgroundColor:"#fff",borderRadius:"50%"}}),(0,f.jsx)("input",{onChange:u,type:"file",title:"Ch\u1ecdn \u1ea3nh \u0111\u1ea1i b\xeca c\u1ee7a b\u1ea1n",style:{width:"100%",height:"100%",position:"absolute",opacity:0,zIndex:14,cursor:"pointer"}})]})})})},pe=n(72426),je=n(74453),xe=((0,pe.ZF)({apiKey:"AIzaSyBsImGL6fuQb715w69ZlSVEkZag07sLu8Y",authDomain:"quiz-20730.firebaseapp.com",projectId:"quiz-20730",storageBucket:"quiz-20730.appspot.com",messagingSenderId:"402820908137",appId:"1:402820908137:web:890833413103e61f6c0ef8",measurementId:"G-D4K2ZRYZ0K"}),function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,s,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=(0,je.cF)(),s=(0,je.iH)(n,"images/"+t.name),r=(0,je.B0)(s,t),e.abrupt("return",new Promise((function(e,t){r.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running");break;default:console.log(e)}}),(function(e){e.code}),(function(){(0,je.Jt)(r.snapshot.ref).then((function(t){return e(t)}))}))})));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),me=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n,s,r,o,d,l,u,c,v){var f,h,p,m,g,k;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=s,h=u,!0!==l){e.next=7;break}return e.next=5,xe(s);case 5:p=e.sent,f=p;case 7:if(!0!==c){e.next=12;break}return e.next=10,xe(u);case 10:m=e.sent,h=m;case 12:return e.next=14,(0,a.ZP)({url:"".concat(x.LB,"/api/users/edit-infor/").concat(t),method:"post",headers:{authorization:"Bearer ".concat(j.Z.get("accessToken"))},data:{newUsername:n,newProfilePicture:f,newGender:r,newCoverPhoto:h,newAddress:v}});case 14:return g=e.sent,e.next=17,g.data;case 17:return k=e.sent,d(null===k||void 0===k?void 0:k.user),o(k),e.abrupt("return",k);case 21:case"end":return e.stop()}}),e)})));return function(t,n,i,s,r,a,o,d,l,u){return e.apply(this,arguments)}}(),ge=me,ke=n(72063),ye=(n(86164),function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:x.LB+"/api/users/deaf",method:"post",headers:{authorization:"Bearer "+j.Z.get("accessToken")},data:{deaf:t,id_user:j.Z.get("uid")}});case 2:return n=e.sent,e.next=5,n.data;case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ze=ye,be=function(e){var t=(0,k.Ds)().enqueueSnackbar,n=(0,o.useContext)(q).socketState,a=(0,o.useContext)(Kn),d=a.data,l=a.setData,u=(a.setChange,(0,o.useState)(!1)),c=(0,r.Z)(u,2),v=c[0],h=c[1],p=(0,o.useState)(),x=(0,r.Z)(p,2),m=x[0],g=x[1],y=(0,o.useState)(!1),Z=(0,r.Z)(y,2),b=Z[0],w=Z[1],C=(0,o.useState)(),_=(0,r.Z)(C,2),N=_[0],I=_[1],B=(0,o.useState)(),P=(0,r.Z)(B,2),T=P[0],z=P[1],R=(0,o.useState)(),F=(0,r.Z)(R,2),A=F[0],L=F[1],O=(0,o.useState)(),E=(0,r.Z)(O,2),M=E[0],D=E[1],W=(0,o.useState)(!1),U=(0,r.Z)(W,2),H=U[0],G=U[1],K=(0,o.useState)(""),V=(0,r.Z)(K,2),Q=(V[0],V[1]),Y=(0,o.useState)(),X=(0,r.Z)(Y,2),ee=X[0],te=X[1];return(0,o.useEffect)((function(){z((function(){var e;return null===d||void 0===d||null===(e=d.gender)||void 0===e?void 0:e.toString()})),g((function(){return null===d||void 0===d?void 0:d.username})),I((function(){return null===d||void 0===d?void 0:d.profilePicture})),Q((function(){return null===d||void 0===d?void 0:d.dateOfBirth})),D((function(){return null===d||void 0===d?void 0:d.address})),te((function(){return null===d||void 0===d?void 0:d.coverPicture}))}),[null===d||void 0===d?void 0:d.gender,null===d||void 0===d?void 0:d.username,null===d||void 0===d?void 0:d.profilePicture,null===d||void 0===d?void 0:d.dateOfBirth,null===d||void 0===d?void 0:d.address,null===d||void 0===d?void 0:d.coverPicture]),(0,o.useEffect)((function(){200===parseInt(null===A||void 0===A?void 0:A.status)?t(null===A||void 0===A?void 0:A.msg,{variant:"success"}):500===parseInt(null===A||void 0===A?void 0:A.status)&&t(null===A||void 0===A?void 0:A.msg,{variant:"error"})}),[A,t]),(0,f.jsx)("div",{className:"dsjdkjfkdlfjdmskdgm",style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",left:0,top:0,background:"rgba(0, 0, 0, 0.3)",zIndex:999},children:(0,f.jsxs)(J.default,{onOutsideClick:function(){return e.setOpen((function(){return!1}))},children:[!1===v&&(0,f.jsxs)("div",{className:"DSkkjfkdjskljfdas",style:{maxWidth:450,width:"100vw",background:"#fff",padding:10,borderRadius:10},children:[(0,f.jsxs)("div",{className:"jdjadkjgkddssa",style:{width:"100%",height:68,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,f.jsx)("strong",{children:"Th\xf4ng tin t\xe0i kho\u1ea3n"}),(0,f.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},onClick:function(){return e.setOpen((function(){return!1}))},children:(0,f.jsx)($.nfZ,{})})]}),(0,f.jsx)(he,{coverPhoto:null===d||void 0===d?void 0:d.coverPicture}),(0,f.jsx)(fe,{setChangeAvatar:w,setOpen:function(){},avatar:N}),(0,f.jsx)(Ce,{username:null===d||void 0===d?void 0:d.username}),(0,f.jsx)(_e,{user:d}),(0,f.jsx)(we,{user:d}),(0,f.jsx)("br",{}),(0,f.jsxs)("div",{className:"fjldjskdjkslajkalsas",style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,f.jsx)(S.Z,{variant:"primary",onClick:function(){return h((function(){return!0}))},className:"fjlkdjfklsdjdasas",style:{display:"flex",justifyContent:"center",alignItems:"center",background:"#2e89ff",cursor:"pointer",color:"#fff",fontWeight:600,border:"none",outline:"none",borderRadius:5,padding:"10px 30px",width:"100%"},children:"C\u1eadp nh\u1eadt th\xf4ng tin"}),(0,f.jsx)("br",{})]})]}),!0===v&&(0,f.jsxs)("div",{className:"fjdklsjdksaassajksa",style:{maxWidth:450,width:"100vw",background:"#fff",padding:10,borderRadius:10},children:[(0,f.jsxs)("div",{className:"jdjadkjgkddssa",style:{width:"100%",height:68,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,f.jsx)("strong",{children:"C\u1eadp nh\u1eadt th\xf4ng tin t\xe0i kho\u1ea3n"}),(0,f.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},onClick:function(){return e.setOpen((function(){return!1}))},children:(0,f.jsx)($.nfZ,{})})]}),(0,f.jsx)(he,{setChangeCoverPhoto:G,newCoverPhoto:ee,setNewCoverPhoto:te,is_edit:!0,coverPhoto:null===d||void 0===d?void 0:d.coverPicture}),(0,f.jsx)(fe,{setChangeAvatar:w,setOpen:function(){},avatar:N,newProfilePicture:N,setNewProfilePicture:I,is_edit:!0}),(0,f.jsx)(Ie,{newUsername:m,setNewUsername:g,username:null===d||void 0===d?void 0:d.username}),(0,f.jsx)(Se,{newGender:T,setNewGender:z,newAddress:M,setNewAddress:D}),(0,f.jsx)("br",{}),(0,f.jsx)("div",{className:"fjldjskdjkslajkalsas",style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",gap:20},children:null!==A&&void 0!==A&&A.msg?(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("button",{onClick:function(){return e.setOpen((function(){return!1}))},className:"fjlkdjfklsdjdasas",style:{display:"flex",justifyContent:"center",alignItems:"center",background:"#5555",cursor:"pointer",color:"#000",fontWeight:600,border:"none",outline:"none",borderRadius:5,padding:"10px 30px"},children:"\u0110\xf3ng"})}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("button",{onClick:function(){return e.setOpen((function(){return!1}))},className:"fjlkdjfklsdjdasas",style:{display:"flex",justifyContent:"center",alignItems:"center",background:"#5555",cursor:"pointer",color:"#000",fontWeight:600,border:"none",outline:"none",borderRadius:5,padding:"10px 30px"},children:"H\u1ee7y"}),(0,f.jsx)("button",{onClick:(0,s.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge(j.Z.get("uid"),m,N,T,L,l,b,ee,H,M);case 2:200===(null===(t=e.sent)||void 0===t?void 0:t.status)&&(null===n||void 0===n||n.emit("update_profile_user",{meId:j.Z.get("uid")}));case 4:case"end":return e.stop()}}),e)}))),className:"fjlkdjfklsdjdasas",style:{display:"flex",justifyContent:"center",alignItems:"center",background:"#2e89ff",cursor:"pointer",color:"#fff",fontWeight:600,border:"none",outline:"none",borderRadius:5,padding:"10px 30px"},children:"C\u1eadp nh\u1eadt"})]})})]})]})})},we=function(e){var t,n=(0,o.useState)(!1),i=(0,r.Z)(n,2),s=i[0],a=i[1],d=(0,o.useContext)(Kn).setChange;return(0,o.useEffect)((function(){var t;a((null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.isDeaf)||!1)}),[null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.isDeaf]),(0,f.jsxs)("div",{style:{width:"100%",padding:10},children:[(0,f.jsx)("div",{style:{fontSize:16,fontWeight:600,marginBottom:12},children:"N\xe2ng cao"}),(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,f.jsx)(ke.Z,{id:"cheese-status",checked:s,onChange:function(){d((function(e){return!e})),a((function(e){return!e})),Ze(!s)}}),(0,f.jsx)("label",{style:{marginLeft:8},htmlFor:"cheese-status",children:"Ch\u1ebf \u0111\u1ed9 gi\xe0nh cho ng\u01b0\u1eddi c\xe2m"})]})]})},Ce=function(e){return(0,f.jsx)("div",{className:"dshjjdkfhjdksldjksdas",style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",padding:10},children:(0,f.jsx)("div",{className:"dkldjskldjkasdasa",style:{fontWeight:600,fontSize:18},children:e.username})})},_e=function(e){var t,n,i;return(0,f.jsxs)("div",{className:"fdlkdjsklfjdklddaas",style:{width:"100%",padding:10},children:[(0,f.jsx)("div",{style:{fontWeight:600,marginBottom:16},children:"Th\xf4ng tin c\xe1 nh\xe2n"}),(0,f.jsx)(Ne,{title:"\u0110i\u1ec7n tho\u1ea1i:",info:null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.phoneNumber}),(0,f.jsx)(Ne,{title:"Gi\u1edbi t\xednh:",info:!0===(null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.gender)?"Nam":"N\u1eef"}),(0,f.jsx)(Ne,{title:"\u0110\u1ecba ch\u1ec9:",info:null===e||void 0===e||null===(i=e.user)||void 0===i?void 0:i.address})]})},Ne=function(e){return(0,f.jsxs)("div",{className:"fjkdajsfkldjklasas",style:{width:"100%",display:"flex",alignItems:"center",marginBottom:12},children:[(0,f.jsx)("div",{className:"gjfdajskldjfskdlj",style:{width:100},children:e.title}),(0,f.jsx)("div",{className:"cvlkdjsfksjkdljdasdas",style:{fontSize:16},children:e.info})]})},Ie=function(e){return(0,f.jsxs)("div",{className:"djklsDjkldjksldaas",style:{justifyContent:"center",alignItems:"center",width:"100%",margin:"12px 0",padding:"0 10px"},children:[(0,f.jsx)("div",{className:"dflksdjkfsjsdsas",style:{marginBottom:8},children:"T\xean hi\u1ec3n th\u1ecb"}),(0,f.jsx)("input",{onChange:function(t){return e.setNewUsername(t.target.value)},value:e.newUsername,type:"text",style:{width:"100%",height:40,padding:10,border:"1px solid #e7e7e7",borderRadius:5,outlineColor:"#2e89ff"}}),(0,f.jsx)("div",{className:"dklsjdklajkasdsas",style:{fontSize:14,marginTop:4},children:"S\u1eed d\u1ee5ng t\xean th\u1eadt \u0111\u1ec3 b\u1ea1n b\xe8 d\u1ec5 d\xe0ng nh\u1eadn bi\u1ebft h\u01a1n"})]})},Se=function(e){return(0,f.jsxs)("div",{className:"kladksmdlsaskdsaskld",style:{marginTop:40,padding:10},children:[(0,f.jsx)("div",{className:"kladkfksldsadskljd",style:{fontWeight:600,marginBottom:12},children:"Th\xf4ng tin c\xe1 nh\xe2n"}),(0,f.jsx)(Be,(0,D.Z)({},e)),(0,f.jsx)("br",{}),(0,f.jsx)(Pe,(0,D.Z)({},e))]})},Be=function(e){return(0,f.jsxs)("div",{className:"msafkdmsalksjkldjs",style:{},children:[(0,f.jsx)("div",{className:"lksadjklasjklasjas",style:{marginBottom:8},children:"Gi\u1edbi t\xednh"}),(0,f.jsxs)("div",{className:"fklsaskdsmlaksajksa",style:{display:"flex",alignItems:"center",gap:20},children:[(0,f.jsxs)("div",{className:"lksjaklssaasas",style:{display:"flex",alignItems:"center",gap:5},children:[(0,f.jsx)("input",{checked:"true"===e.newGender,onChange:function(t){return e.setNewGender(t.target.value)},type:"radio",name:"gender",value:!0,style:{width:20,height:20}}),(0,f.jsx)("div",{className:"lkdasdkaSasad",children:"Nam"})]}),(0,f.jsxs)("div",{className:"lksjaklssaasas",style:{display:"flex",alignItems:"center",gap:5},children:[(0,f.jsx)("input",{checked:"false"===e.newGender,onChange:function(t){return e.setNewGender(t.target.value)},type:"radio",name:"gender",value:!1,style:{width:20,height:20}}),(0,f.jsx)("div",{className:"lkdasdkaSasad",children:"N\u1eef"})]})]})]})},Pe=function(e){return(0,f.jsxs)("div",{className:"msafkdmsalksjkldjs",style:{},children:[(0,f.jsx)("div",{className:"lksadjklasjklasjas",style:{marginBottom:8},children:"\u0110\u1ecba ch\u1ec9"}),(0,f.jsx)("div",{className:"fklsaskdsmlaksajksa",style:{display:"flex",alignItems:"center",gap:20},children:(0,f.jsx)("input",{value:null===e||void 0===e?void 0:e.newAddress,onChange:function(t){return null===e||void 0===e?void 0:e.setNewAddress(t.target.value)},type:"text",style:{width:"100%",height:40,padding:10,borderRadius:5,outlineColor:"#2e89ff"}})})]})},Te=(0,o.memo)(be),ze=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n,s){var r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:x.LB+"/api/conversations/delete-member/"+t,method:"post",headers:{authorization:"Bearer "+j.Z.get("accessToken")},data:{userId:j.Z.get("uid"),conversationId:n}});case 2:return r=e.sent,e.next=5,r.data;case 5:return o=e.sent,console.log(o),e.abrupt("return",s((function(e){return!e})));case 8:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),Re=ze,Fe=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n,s,r,o,d){var l,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:"".concat(x.LB,"/api/conversations"),method:"post",headers:{authorization:"Bearer "+j.Z.get("accessToken")},data:{label:t,member:n,createdBy:s,imageGroup:r}});case 2:return l=e.sent,e.next=5,l.data;case 5:return u=e.sent,d("/chat/"+(null===u||void 0===u?void 0:u._id)),e.abrupt("return",o(u));case 8:case"end":return e.stop()}}),e)})));return function(t,n,i,s,r,a){return e.apply(this,arguments)}}(),Ae=Fe,Le=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:x.LB+"/api/users/friends/"+j.Z.get("uid"),method:"get",headers:{authorization:"Bearer "+j.Z.get("accessToken")}});case 2:return n=e.sent,e.next=5,n.data;case 5:return s=e.sent,e.abrupt("return",t(s));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=Le,Ee=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n){var s,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:x.LB+"/api/users/unfriend/"+t,method:"post",data:{userId:j.Z.get("uid")},headers:{authorization:"Bearer "+j.Z.get("accessToken")}});case 2:return s=e.sent,e.next=5,s.data;case 5:return r=e.sent,e.abrupt("return",n(r));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Me=Ee,De=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:"".concat(x.LB,"/api/conversations/").concat(j.Z.get("uid")),method:"get",headers:{authorization:"Bearer "+j.Z.get("accessToken")}});case 2:return n=e.sent,e.next=5,n.data;case 5:return s=e.sent,e.abrupt("return",t(s));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),We=De,qe=n(82137),Ue=n(763),He=n.n(Ue),Ge=n(60438),Ke=n.n(Ge),Ve=n(75660),Qe=n(56983),Ye=function(e){var t,n,i,s,a,l=(0,o.useState)(new Audio("https://static.xx.fbcdn.net/rsrc.php/yR/r/lvSDckxyoU5.ogg")),u=(0,r.Z)(l,2),c=u[0],v=(u[1],(0,d.UO)().idConversation),h=(0,o.useContext)(q).socketState,p=(0,o.useState)([]),j=(0,r.Z)(p,2),x=j[0],m=j[1];(0,o.useEffect)((function(){We(m)}),[null===e||void 0===e?void 0:e.change,e.is_friend_page]),(0,o.useEffect)((function(){x.length>0&&(h.on("newest_message",(function(e){var t=x.findIndex((function(t){return t.id_conversation===(null===e||void 0===e?void 0:e.roomId)}));if(t>=0){var n=[].concat((0,X.Z)(x.slice(0,t)),[(0,D.Z)((0,D.Z)({},x[t]),{},{lastUpdate:null===e||void 0===e?void 0:e.lastUpdate})],(0,X.Z)(x.slice(t+1)));m((function(){return n}))}})),h.on("newest_message_sound",(function(e){x.findIndex((function(t){return t.id_conversation===(null===e||void 0===e?void 0:e.roomId)}))>=0&&c.play()})))}),[h,x]);var g=new qe.Z(x,{keys:[{name:"label",getFn:function(e){return e.label}},{name:"username",getFn:function(e){var t;return null===(t=e.member)||void 0===t?void 0:t.map((function(e){return e.username}))}}]});return(0,f.jsxs)("div",{className:"skdjkfjdkdjsdas",style:{width:" 100%",height:"calc(100% - 60px)",overflow:"auto"},children:[(0,f.jsx)("div",{style:{textAlign:"center"},children:!0===(null===e||void 0===e?void 0:e.isSearching)&&(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.length)<=0&&!0!==(null===e||void 0===e?void 0:e.search_conversation)&&"Kh\xf4ng t\xecm th\u1ea5y k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p"}),(0,f.jsx)("div",{style:{textAlign:"center"},children:!0===(null===e||void 0===e?void 0:e.isSearching)&&(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.length)<=0&&!0===(null===e||void 0===e?void 0:e.search_conversation)&&g.search(null===e||void 0===e?void 0:e.searchQuery).length<=0&&"Kh\xf4ng t\xecm th\u1ea5y k\u1ebft qu\u1ea3 ph\xf9 h\u1ee3p"}),!0===(null===e||void 0===e?void 0:e.isSearching)&&(null===e||void 0===e||null===(i=e.searchQuery)||void 0===i?void 0:i.length)>0&&(null===x||void 0===x?void 0:x.length)>0&&(null===(s=g.search(null===e||void 0===e?void 0:e.searchQuery))||void 0===s?void 0:s.map((function(e,t){return(0,f.jsx)(Xe,(0,D.Z)({},e.item),t)}))),(0,f.jsx)("div",{style:{textAlign:"center"},children:!1===(null===e||void 0===e?void 0:e.isSearching)&&(null===x||void 0===x?void 0:x.length)<=0&&"B\u1ea1n kh\xf4ng c\xf3 cu\u1ed9c h\u1ed9i tho\u1ea1i n\xe0o."}),!1===(null===e||void 0===e?void 0:e.isSearching)&&(null===x||void 0===x?void 0:x.length)>0&&(0,f.jsx)(Ve.Z,{children:null===(a=He().orderBy(x,(function(e){return Ke()(e.lastUpdate,"D/M/YYYY, H:mm:ss A").valueOf()}),"desc"))||void 0===a?void 0:a.map((function(e,t){return(0,f.jsx)(Qe.Z,{timeout:500,classNames:"item",children:(0,f.jsx)(Xe,(0,D.Z)({idConversation:v,socketState:h},e))},null===e||void 0===e?void 0:e.id_conversation)}))})]})},Xe=(0,o.memo)((function(e){var t=e.socketState,n=e.idConversation,i=(0,o.useState)(!1),s=(0,r.Z)(i,2),a=s[0],d=s[1];return(0,o.useEffect)((function(){n&&t&&null!==e&&void 0!==e&&e.id_conversation&&n!==(null===e||void 0===e?void 0:e.id_conversation)&&t.on("send_new_message_from_server",(function(t){(null===t||void 0===t?void 0:t.idConversation)===(null===e||void 0===e?void 0:e.id_conversation)&&(null===t||void 0===t?void 0:t.idConversation)!==n&&n!==(null===e||void 0===e?void 0:e.id_conversation)&&d((function(){return!0}))}))}),[n,null===e||void 0===e?void 0:e.id_conversation]),(0,f.jsx)(v.OL,{onClick:function(){d((function(){return!1}))},style:{textDecoration:"none",color:"#000"},className:function(e){return e.isActive?"fdsgfsdgfdsdas fhjsdjsfkdjdfklsjdsa":"fdsgfsdgfdsdas dajksdjskldjaksljaklasa"},to:"/chat/"+(null===e||void 0===e?void 0:e._id),children:(0,f.jsxs)("div",{className:"fjsdjljkgjhdlsjhdas ".concat(!0===a?"skdsdkldadskaldgsd":"kalaskalsfsasas"," ").concat((null===e||void 0===e?void 0:e.id_conversation)===n?"dsjlkdjksdajskfjksa":"agatareasegffsdda"),style:{width:"100%",padding:16,display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},children:[(0,f.jsxs)("div",{className:"jskdjksjkgfddas",style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:10},children:[(0,f.jsx)($e,(0,D.Z)({},e)),(0,f.jsx)(Je,(0,D.Z)({},e))]}),(0,f.jsx)("div",{className:"fjklsjklfjsksajas",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:!0===a&&(0,f.jsx)("div",{style:{width:10,height:10,borderRadius:"50%",background:"#2e89ff"}})})]})})})),$e=function(e){var t,n,i,s,r,a,o;return(0,f.jsx)("div",{className:"djklsjkdjvsdddasa",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,f.jsx)("img",{src:null!==e&&void 0!==e&&e.imageGroup?null===e||void 0===e?void 0:e.imageGroup:(null===e||void 0===e||null===(t=e.member)||void 0===t||null===(n=t.filter((function(e){return(null===e||void 0===e?void 0:e._id)!==j.Z.get("uid")})))||void 0===n||null===(i=n[0])||void 0===i||null===(s=i.profilePicture)||void 0===s?void 0:s.length)>0?null===e||void 0===e||null===(r=e.member)||void 0===r||null===(a=r.filter((function(e){return(null===e||void 0===e?void 0:e._id)!==j.Z.get("uid")})))||void 0===a||null===(o=a[0])||void 0===o?void 0:o.profilePicture:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png",alt:"",style:{width:56,height:56,objectFit:"cover",borderRadius:"50%"}})})},Je=function(e){var t,n,i,s,r,a,o;return(0,f.jsx)("div",{className:"fjklsajkjfksaasafsd",style:{display:"flex",alignItems:"center"},children:(0,f.jsx)("div",{className:"fldsajkjdfkldjasa",style:{fontSize:18},children:null!==e&&void 0!==e&&e.label?null===e||void 0===e?void 0:e.label:(null===e||void 0===e||null===(t=e.member)||void 0===t||null===(n=t.filter((function(e){return(null===e||void 0===e?void 0:e._id)!==j.Z.get("uid")})))||void 0===n||null===(i=n[0])||void 0===i||null===(s=i.username)||void 0===s?void 0:s.length)>0?null===e||void 0===e||null===(r=e.member)||void 0===r||null===(a=r.filter((function(e){return(null===e||void 0===e?void 0:e._id)!==j.Z.get("uid")})))||void 0===a||null===(o=a[0])||void 0===o?void 0:o.username:"Anonymous"})})},et=(0,o.memo)(Ye),tt=function(e){var t=(0,d.s0)();return(0,f.jsxs)("div",{onClick:function(){return t("/friends/request/to/me")},className:"fvjkldjaklsdjklasjassa fjsdjljkgjhdlsjhdas",style:{width:"100%",padding:16,display:"flex",alignItems:"center",gap:10,cursor:"pointer"},children:[(0,f.jsx)("img",{src:"https://chat.zalo.me/assets/NewFr@2x.820483766abed8ab03205b8e4a8b105b.png",alt:"",style:{width:48,height:48,objectFit:"cover",borderRadius:"50%"}}),(0,f.jsx)("div",{className:"fdjfkjkajawas",style:{fontSize:18},children:"Danh s\xe1ch k\u1ebft b\u1ea1n"})]})},nt=function(e){var t=(0,d.s0)();return(0,f.jsxs)("div",{onClick:function(){return t("/friends/request/by/me")},className:"fvjkldjaklsdjklasjassa fjsdjljkgjhdlsjhdas",style:{width:"100%",padding:16,display:"flex",alignItems:"center",gap:10,cursor:"pointer"},children:[(0,f.jsx)("img",{src:"https://chat.zalo.me/assets/group@2x.2d184edd797db8782baa0d5c7a786ba0.png",alt:"",style:{width:48,height:48,objectFit:"cover",borderRadius:"50%"}}),(0,f.jsx)("div",{className:"fdjfkjkajawas",style:{fontSize:18},children:"Danh s\xe1ch y\xeau c\u1ea7u k\u1ebft b\u1ea1n"})]})},it=function(e){var t,n,i=(0,o.useState)(),s=(0,r.Z)(i,2),a=s[0],d=s[1];return(0,o.useEffect)((function(){Oe(d)}),[]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"fvjkldjaklsdjklasjassa fjsdjljkgjhdlsjhdas",style:{width:"100%",padding:16,display:"flex",alignItems:"center",gap:10,cursor:"pointer"},children:(0,f.jsx)("div",{style:{fontSize:18},children:"Danh s\xe1ch b\u1ea1n b\xe8"})}),null===a||void 0===a||null===(t=a.data)||void 0===t||null===(n=t.friends)||void 0===n?void 0:n.map((function(t,n){return(0,f.jsx)(st,(0,D.Z)({setArrayMember:null===e||void 0===e?void 0:e.setArrayMember,arrayMember:null===e||void 0===e?void 0:e.arrayMember,is_invite:null===e||void 0===e?void 0:e.is_invite},t),n)}))]})},st=function(e){var t,n,a,d=(0,o.useState)((function(){return!1})),l=(0,r.Z)(d,2),u=l[0],c=l[1];return(0,f.jsxs)("div",{onClick:function(){return c((function(e){return!e}))},className:"fjsdjljkgjhdlsjhdas",style:{width:"100%",padding:16,display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},children:[(0,f.jsxs)("div",{className:"jskdjksjkgfddas",style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:10},children:[(0,f.jsx)($e,(0,D.Z)((0,D.Z)({},e),{},{imageGroup:(null===e||void 0===e||null===(t=e.profilePicture)||void 0===t?void 0:t.length)>0?null===e||void 0===e?void 0:e.profilePicture:"https://forum.truckersmp.com/uploads/monthly_2022_05/imported-photo-240240.thumb.png.974ffed93b3286f4e60938fb8c7ec38e.png"})),(0,f.jsx)(Je,(0,D.Z)((0,D.Z)({},e),{},{label:null===e||void 0===e?void 0:e.username})),!0===(null===e||void 0===e?void 0:e.is_group)&&(0,f.jsxs)(f.Fragment,{children:[!0===(null===e||void 0===e?void 0:e.isHostGroup)&&(null===e||void 0===e?void 0:e._id)===(null===e||void 0===e?void 0:e.my_id)&&(0,f.jsx)("div",{children:"(B\u1ea1n)"}),!1===(null===e||void 0===e?void 0:e.isHostGroup)&&(null===e||void 0===e?void 0:e._id)===(null===e||void 0===e?void 0:e.my_id)&&(0,f.jsx)("div",{children:"(B\u1ea1n)"})]})]}),(0,f.jsxs)("div",{className:"fjklsjklfjsksajas",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[!0===(null===e||void 0===e?void 0:e.is_invite)&&(0,f.jsx)(S.Z,{onClick:function(t){t.stopPropagation(),null===e||void 0===e||e.setArrayMember((function(t){return[].concat((0,X.Z)(t),[null===e||void 0===e?void 0:e._id])}))},disabled:!(null===e||void 0===e||null===(n=e.arrayMember)||void 0===n||!n.includes(null===e||void 0===e?void 0:e._id)),variant:"primary",children:null!==e&&void 0!==e&&null!==(a=e.arrayMember)&&void 0!==a&&a.includes(null===e||void 0===e?void 0:e._id)?"\u0110\xe3 th\xeam":"Th\xeam"}),!0===(null===e||void 0===e?void 0:e.is_group)&&!0===(null===e||void 0===e?void 0:e.isHostGroup)&&(null===e||void 0===e?void 0:e._id)!==(null===e||void 0===e?void 0:e.my_id)&&(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(S.Z,{onClick:function(){var t=(0,s.Z)((0,i.Z)().mark((function t(n){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.stopPropagation(),t.next=3,Re(null===e||void 0===e?void 0:e._id,null===e||void 0===e?void 0:e.id_conversation,null===e||void 0===e?void 0:e.setResult);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),color:"primary",style:{whiteSpace:"nowrap"},children:"X\xf3a th\xe0nh vi\xean"})})]}),!0===u&&(0,f.jsx)(rt,(0,D.Z)({open:u,setOpen:c},e))]})},rt=function(e){var t=(0,o.useState)(),n=(0,r.Z)(t,2),a=n[0],l=n[1],u=(0,o.useState)(),c=(0,r.Z)(u,2),v=(c[0],c[1]),h=(0,o.useState)(),p=(0,r.Z)(h,2),x=(p[0],p[1]),m=(0,d.s0)();(0,o.useEffect)((function(){e._id&&ie(e._id,l)}),[e._id]);var g=function(){var t=(0,s.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Me(null===e||void 0===e?void 0:e._id,v);case 2:window.location.reload();case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,f.jsx)("div",{className:"fkjldsklkdsslaskdsaa",style:{width:"100%",height:"100%",position:"fixed",top:0,left:0,background:"rgba(0 ,0 ,0,0.3)",zIndex:12,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,f.jsx)(J.default,{onOutsideClick:function(){return e.setOpen((function(){return!1}))},children:(0,f.jsx)("div",{className:"fjlkdsjdkljsdklaskd",style:{padding:16,background:"#fff",borderRadius:5,width:"100vw",maxWidth:450},children:(0,f.jsxs)("div",{style:{width:"100%",height:"100%"},children:[(0,f.jsxs)("div",{className:"jdjadkjgkddssa",style:{width:"100%",height:68,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,f.jsx)("div",{className:"dkldjskldjkasdasa",style:{fontWeight:600,fontSize:18},children:e.username}),(0,f.jsx)("div",{onClick:function(){return e.setOpen((function(){return!1}))},style:{display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",padding:10},children:(0,f.jsx)($.nfZ,{onClick:function(){return e.setOpen((function(){return!1}))}})})]}),(0,f.jsx)(he,{coverPhoto:null===e||void 0===e?void 0:e.coverPhoto}),(0,f.jsx)(fe,{avatar:null===e||void 0===e?void 0:e.profilePicture}),(0,f.jsx)(Ce,{username:null===e||void 0===e?void 0:e.username}),(0,f.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",gap:16},children:[(0,f.jsx)(S.Z,{onClick:(0,s.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.id_conversation){t.next=4;break}m("/chat/"+(null===a||void 0===a?void 0:a.id_conversation)),t.next=6;break;case 4:return t.next=6,Ae(void 0,[null===e||void 0===e?void 0:e._id,j.Z.get("uid")],j.Z.get("uid"),void 0,x,m);case 6:case"end":return t.stop()}}),t)}))),variant:"primary",children:"Nh\u1eafn tin"}),(0,f.jsx)(S.Z,{onClick:g,variant:"secondary",children:"H\u1ee7y k\u1ebft b\u1ea1n"})]}),(0,f.jsx)("br",{})]})})})})},at=function(e){return(0,f.jsxs)("div",{className:"skdjkfjdkdjsdas",style:{width:" 100%",height:"calc(100% - 60px)",overflow:"auto"},children:[(0,f.jsx)(tt,{}),(0,f.jsx)(nt,{}),(0,f.jsx)(it,{})]})},ot=n(16856),dt=n(84373),lt=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n){var s,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:x.LB+"/api/messages/recall/message/"+t,method:"post",headers:{authorization:"Bearer "+j.Z.get("accessToken")},data:{message:n}});case 2:return s=e.sent,e.next=5,s.data;case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ut=lt,ct=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n){var s,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:x.LB+"/api/messages/remove/message/"+t,method:"post",headers:{authorization:"Bearer "+j.Z.get("accessToken")},data:{message:n}});case 2:return s=e.sent,e.next=5,s.data;case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),vt=ct,ft=n(51599),ht=function(e){var t,n,i=(0,d.UO)().idConversation,s=(0,o.useContext)(q).socketState;return(0,f.jsx)("div",{className:"fjkdjskjfksjdaswawsa",style:{width:"100%",height:"calc(100% - 60px - 68px"},children:(0,f.jsx)("div",{id:"main-chat-scroll-to-bottom",className:"fjkdjsijaskldjakjdsk",style:{width:"100%",height:"100%",overflow:"auto",padding:5},children:(0,f.jsxs)(ft.ZP,{className:"fjkdjsijaskldjakjdsk",mode:"bottom",children:[null===(t=He().orderBy(null===e||void 0===e?void 0:e.listMessage,(function(e){return Ke()(e.createdAt).valueOf()}),"asc"))||void 0===t||null===(n=t.filter((function(e){return e.roomId===i})))||void 0===n?void 0:n.map((function(e){return(0,f.jsx)(jt,(0,D.Z)((0,D.Z)({socketState:s},e),{},{keyId:null===e||void 0===e?void 0:e.key,idConversation:i}),null===e||void 0===e?void 0:e.key)})),(0,f.jsx)("div",{className:"_3ybTi_as",name:"main-chat",style:{position:"relative"}})]})})})},pt=(0,o.memo)(ht),jt=function(e){var t,n,i,s=e.idConversation,a=(0,o.useState)(!1),d=(0,r.Z)(a,2),l=d[0],u=d[1],c=(0,o.useState)(void 0),v=(0,r.Z)(c,2),h=v[0],p=v[1];(0,o.useEffect)((function(){var t,n;null===e||void 0===e||null===(t=e.socketState)||void 0===t||t.on("recall_message_server",(function(t){(null===e||void 0===e?void 0:e.keyId)===(null===t||void 0===t?void 0:t.keyId)&&(p(t),ut(null===e||void 0===e?void 0:e.keyId,null===t||void 0===t?void 0:t.message))})),null===e||void 0===e||null===(n=e.socketState)||void 0===n||n.on("remove_message_server",(function(t){(null===e||void 0===e?void 0:e.keyId)===(null===t||void 0===t?void 0:t.keyId)&&(p(t),vt(null===e||void 0===e?void 0:e.keyId,null===t||void 0===t?void 0:t.message))}))}),[null===e||void 0===e?void 0:e.keyId]);return(0,f.jsx)("div",{onMouseEnter:function(){return u(!0)},onMouseLeave:function(){return u(!1)},className:"fjdhsjkfhjdkahsjassa ".concat((null===e||void 0===e||null===(t=e.sender)||void 0===t?void 0:t._id)===j.Z.get("uid")?"fjkdjjkdhjfdasdjkhsa":"djskdhjfhsjdahsja"),children:(0,f.jsxs)("div",{className:"dfkdsdhsjkfhjkhdadss",style:{position:"relative"},children:[(0,f.jsx)(mt,(0,D.Z)({},e)),(0,f.jsx)(gt,(0,D.Z)((0,D.Z)({},e),{},{setOpen:u,reValue:h})),(null===e||void 0===e||null===(n=e.sender)||void 0===n?void 0:n._id)===j.Z.get("uid")&&(0,f.jsx)("div",{style:{position:"relative"},children:!0===l&&(0,f.jsx)(xt,{recallMessage:function(){var t;null===e||void 0===e||null===(t=e.socketState)||void 0===t||t.emit("recall_message",{idConversation:s,kindof:"recall",idMessage:null===e||void 0===e?void 0:e._id,keyId:null===e||void 0===e?void 0:e.keyId})},removeMessage:function(){var t,n;null===e||void 0===e||null===(t=e.socketState)||void 0===t||t.emit("remove_message",{idConversation:s,kindof:"remove",idMessage:null===e||void 0===e?void 0:e._id,keyId:null===e||void 0===e?void 0:e.keyId}),null===e||void 0===e||null===(n=e.socketState)||void 0===n||n.on("remove_message_server",(function(t){p(t),vt(null===e||void 0===e?void 0:e.keyId,null===t||void 0===t?void 0:t.message)}))},sender:null===e||void 0===e||null===(i=e.sender)||void 0===i?void 0:i._id,me:j.Z.get("uid")})})]})})},xt=function(e){return(null===e||void 0===e?void 0:e.sender)===(null===e||void 0===e?void 0:e.me)?(0,f.jsxs)("div",{className:"fdkdjskjfkgsdA",style:{alignSelf:"center",background:"#f2f0f5",borderRadius:5,padding:10,gap:10,display:"flex",justifyContent:" center",alignItems:"center",position:"absolute",right:"100%",top:"50%",transform:"translate(-50%, 0)"},children:[(0,f.jsx)("div",{onClick:null===e||void 0===e?void 0:e.recallMessage,title:"Thu h\u1ed3i",style:{display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},children:(0,f.jsx)(dt.Nnu,{style:{width:18,height:18}})}),(0,f.jsx)("div",{onClick:null===e||void 0===e?void 0:e.removeMessage,title:"G\u1ee1 b\u1ecf",style:{display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},children:(0,f.jsx)(ot.ZkW,{style:{width:18,height:18}})})]}):(0,f.jsxs)("div",{className:"fdkdjskjfkgsdA",style:{alignSelf:"center",background:"#f2f0f5",borderRadius:5,padding:10,gap:10,display:"flex",justifyContent:" center",alignItems:"center",position:"absolute",left:"100%",top:"50%",transform:"translate(50%, 0)"},children:[(0,f.jsx)("div",{onClick:null===e||void 0===e?void 0:e.recallMessage,title:"Thu h\u1ed3i",style:{display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},children:(0,f.jsx)(dt.Nnu,{style:{width:18,height:18}})}),(0,f.jsx)("div",{onClick:null===e||void 0===e?void 0:e.removeMessage,title:"G\u1ee1 b\u1ecf",style:{display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},children:(0,f.jsx)(ot.ZkW,{style:{width:18,height:18}})})]})},mt=function(e){var t;return(0,f.jsx)("div",{className:"fdjfskjfdkjdkasjkssa",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,f.jsx)("img",{src:(null===e||void 0===e||null===(t=e.sender)||void 0===t?void 0:t.profilePicture)||"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png",alt:"",style:{width:48,height:48,borderRadius:"50%",objectFit:"cover"}})})},gt=function(e){var t,n,i;return(0,f.jsx)("div",{className:"fjkdjskfhjkdsajkaas ".concat((null===e||void 0===e||null===(t=e.sender)||void 0===t?void 0:t._id)===j.Z.get("uid")?"sjfshjkaljsaasasarseas":"ayuehajkshakjfhdasas"),children:null!==e&&void 0!==e&&e.reValue&&(null===e||void 0===e?void 0:e.keyId)===(null===e||void 0===e||null===(n=e.reValue)||void 0===n?void 0:n.keyId)?(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("div",{className:"fjdkdjskjaskjasasas",style:{maxWidth:"100%",wordBreak:"break-word"},children:null===e||void 0===e||null===(i=e.reValue)||void 0===i?void 0:i.message})}):(0,f.jsxs)(f.Fragment,{children:["text"===(null===e||void 0===e?void 0:e.type_message)&&(0,f.jsx)("div",{className:"fjdkdjskjaskjasasas",style:{maxWidth:"100%",wordBreak:"break-word"},children:null===e||void 0===e?void 0:e.message}),"image"===(null===e||void 0===e?void 0:e.type_message)&&(0,f.jsx)(v.rU,{to:"/media/"+(null===e||void 0===e?void 0:e.keyId),children:(0,f.jsx)("img",{alt:"",src:null===e||void 0===e?void 0:e.message,className:"fjdkdjskjaskjasasas",style:{maxWidth:"100%",height:"auto",aspectRatio:16/9,borderRadius:5}})}),"file"===(null===e||void 0===e?void 0:e.type_message)&&(0,f.jsx)("a",{style:{textDecoration:"none"},rel:"noreferrer",target:"_blank",href:null===e||void 0===e?void 0:e.message,children:(0,f.jsx)("div",{style:{wordBreak:"break-all",color:"#fff",textAlign:"left",textDecoration:"underline"},children:null===e||void 0===e?void 0:e.name_file})}),"audio"===(null===e||void 0===e?void 0:e.type_message)&&(0,f.jsx)("audio",{src:null===e||void 0===e?void 0:e.message,controls:!0}),"like"===(null===e||void 0===e?void 0:e.type_message)&&(0,f.jsx)(l.L7p,{size:100,color:"#2e89ff"}),"text_to_voice"===(null===e||void 0===e?void 0:e.type_message)&&(0,f.jsx)(kt,(0,D.Z)({},e))]})})},kt=function(e){var t=(0,o.useRef)(),n=(0,o.useState)(null===e||void 0===e?void 0:e.autoplaying),i=(0,r.Z)(n,2),s=i[0],a=i[1];return(0,o.useEffect)((function(){a((function(){return null===e||void 0===e?void 0:e.autoplaying}))}),[null===e||void 0===e?void 0:e.autoplaying]),(0,o.useEffect)((function(){var n;if(0===s&&(null===e||void 0===e||null===(n=e.sender)||void 0===n?void 0:n._id)!==j.Z.get("uid")){var i=setTimeout((function(){t.current.play()}),1e3),r=setTimeout((function(){a((function(){return 1}))}),1e3);return function(){clearTimeout(i),clearTimeout(r)}}}),[]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{onClick:function(){return t.current.play()},className:"yhsihdukhdkshdasas",style:{maxWidth:"100%",wordBreak:"break-word",background:"#ffb300",padding:5,borderRadius:5,cursor:"pointer"},children:null===e||void 0===e?void 0:e.extend_text}),(0,f.jsx)("audio",{ref:t,controls:!1,src:null===e||void 0===e?void 0:e.message})]})},yt=n(54261),Zt=function(e){return(0,f.jsxs)("div",{className:"dksfjkdjfkjdaskss",style:{display:"flex",alignItems:"center",gap:10,position:"absolute",bottom:"100%",left:0,zIndex:10,padding:5,background:"#fff"},children:[(0,f.jsxs)("div",{children:[e.userTyping," \u0111ang nh\u1eadp"]}),(0,f.jsx)("div",{className:"ticontainer",children:(0,f.jsxs)("div",{className:"tiblock",children:[(0,f.jsx)("div",{className:"tidot"}),(0,f.jsx)("div",{className:"tidot"}),(0,f.jsx)("div",{className:"tidot"})]})})]})},bt=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n,s,r,o,d,l,u){var c,v;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:x.LB+"/api/messages",method:"post",data:{sender:t,conversation:n,key:s,message:r,roomId:o,type_message:d,name_file:l,extend_text:u},headers:{authorization:"Bearer "+j.Z.get("accessToken")}});case 2:return c=e.sent,e.next=5,c.data;case 5:return v=e.sent,e.abrupt("return",v);case 7:case"end":return e.stop()}}),e)})));return function(t,n,i,s,r,a,o,d){return e.apply(this,arguments)}}(),wt=bt,Ct=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:x.LB+"/api/users/update/last/conversation/"+j.Z.get("uid"),data:{idConversation:t},method:"post",headers:{authorization:"Bearer "+j.Z.get("accessToken")}});case 2:return n=e.sent,e.next=5,n.data;case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_t=Ct,Nt=n(95958),It=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:x.LB+"/api/conversations/upload/voice",method:"post",headers:{authorization:"Bearer "+j.Z.get("accessToken"),"Content-Type":"multipart/form-data"},data:t});case 2:return n=e.sent,e.next=5,n.data;case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),St=It,Bt=function(e){var t=function(){var t=(0,s.Z)((0,i.Z)().mark((function t(n){var s,r,a;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(s=new FormData).append("voice",n),t.next=4,St(s);case 4:r=t.sent,a=r.voice,document.createElement("audio").src=a,null===e||void 0===e||e.sendVoiceMessage(a);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,f.jsx)("div",{style:{position:"relative"},children:(0,f.jsx)(Nt.h,{onRecordingComplete:function(e){return t(e)},recorderControls:null===e||void 0===e?void 0:e.recorderControls,classes:"audio-record"})})},Pt=function(e){var t=(0,Nt.I)(),n=(0,o.useContext)(q).socketState,r=(0,o.useContext)(Kn).data,a=(0,d.UO)().idConversation,c=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe(t.target.files[0]);case 2:s=e.sent,n.emit("message_from_client",{message:s,roomId:a,sender:r,type_message:"image",key:(0,yt.Z)(),createdAt:new Date}),wt(j.Z.get("uid"),a,(0,yt.Z)(),s,a,"image"),_t(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe(t.target.files[0]);case 2:s=e.sent,n.emit("message_from_client",{message:s,roomId:a,sender:r,type_message:"file",key:(0,yt.Z)(),name_file:t.target.files[0].name,createdAt:new Date}),wt(j.Z.get("uid"),a,(0,yt.Z)(),s,a,"file",t.target.files[0].name),_t(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.emit("message_from_client",{message:t,roomId:a,sender:r,type_message:"audio",key:(0,yt.Z)(),createdAt:new Date}),wt(j.Z.get("uid"),a,(0,yt.Z)(),t,a,"audio","");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,f.jsxs)("div",{className:"jfdskajdfkdfjkdasa",style:{display:"flex",justifyContent:"center",alignItems:"center",gap:10,paddingRight:16},children:[(0,f.jsxs)("div",{title:"Ch\u1ecdn \u1ea3nh",style:{width:36,height:36,borderRadius:"50%",border:"1px solid #d7d7d7",display:"flex",justifyContent:"center",alignItems:"center",position:"relative"},children:[(0,f.jsx)(u.Lwf,{color:"#555"}),(0,f.jsx)("input",{onChange:c,type:"file",className:"dfjfjskfdjdkadfdsd",style:{width:"100%",height:"100%",opacity:0,position:"absolute",top:0,left:0,cursor:"pointer"}})]}),(0,f.jsxs)("div",{title:"Ch\u1ecdn file",style:{width:36,height:36,borderRadius:"50%",border:"1px solid #d7d7d7",display:"flex",justifyContent:"center",alignItems:"center",position:"relative"},children:[(0,f.jsx)(l.QZL,{color:"#555"}),(0,f.jsx)("input",{onChange:v,type:"file",className:"dfjfjskfdjdkadfdsd",style:{width:"100%",height:"100%",opacity:0,position:"absolute",top:0,left:0,cursor:"pointer"}})]}),(0,f.jsxs)("div",{title:"G\u1eedi audio",style:{width:36,height:36,borderRadius:"50%",border:"1px solid #d7d7d7",display:"flex",justifyContent:"center",alignItems:"center",position:"relative"},children:[(0,f.jsx)(ot.HYj,{color:"#555",style:{width:16,height:16}}),(0,f.jsx)("button",{onClick:t.startRecording,type:"file",className:"dfjfjskfdjdkadfdsd",style:{width:"100%",height:"100%",opacity:0,position:"absolute",top:0,left:0,cursor:"pointer"}}),(0,f.jsx)(Bt,{sendVoiceMessage:h,recorderControls:t})]})]})},Tt=(0,o.memo)(Pt),zt=function(e){var t=(0,o.useContext)(q).socketState,n=(0,o.useContext)(Kn).data,i=(0,d.UO)().idConversation;return(0,f.jsx)("div",{className:"fjdkfjkdjdkjskds",style:{flex:"1 1 0",display:"flex",justifyContent:" center",alignItems:"center"},children:(0,f.jsx)("input",{onKeyUp:function(t){"Enter"===t.key&&t.target.value.trim().length>0&&(null===e||void 0===e||e.sendMessage())},onChange:function(s){var r,a;e.setContentText(s.target.value),1===(null===(r=s.target.value)||void 0===r?void 0:r.length)?t.emit("typing_from_client_on",{roomId:i,data:n,typing:!0}):(null===(a=s.target.value)||void 0===a?void 0:a.length)<=0&&t.emit("typing_from_client_off",{roomId:i,data:n,typing:!1})},value:e.contentText,type:"text",style:{width:"100%",height:40,outlineColor:"#2e89ff",border:"1px solid #e7e7e7",borderRadius:80,padding:10},placeholder:"Nh\u1eadp tin nh\u1eafn..."})})},Rt=(0,o.memo)(zt),Ft=n(17425),At=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:x.LB+"/api/conversations/send/text-to-voice",method:"post",data:{text:t},headers:{authorization:"Bearer "+j.Z.get("accessToken")}});case 2:return n=e.sent,e.next=5,n.data;case 5:return s=e.sent,e.abrupt("return",null===s||void 0===s?void 0:s.voice);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Lt=At,Ot=function(e){var t,n=(0,o.useContext)(q).socketState,r=(0,o.useContext)(Kn).data,a=(0,d.UO)().idConversation,l=function(){n.emit("message_from_client",{message:e.contentText,roomId:a,sender:r,type_message:"text",key:(0,yt.Z)(),createdAt:new Date}),n.emit("typing_from_client_off",{roomId:a,data:r,typing:!1}),wt(j.Z.get("uid"),a,(0,yt.Z)(),e.contentText,a,"text"),_t(a),e.setContentText((function(){return""})),null===e||void 0===e||e.sendNewMessage()},u=function(){var t=(0,s.Z)((0,i.Z)().mark((function t(){var s;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((null===e||void 0===e?void 0:e.contentText.length)>0)){t.next=10;break}return t.next=3,Lt(null===e||void 0===e?void 0:e.contentText);case 3:s=t.sent,n.emit("message_from_client",{message:s,roomId:a,sender:r,type_message:"text_to_voice",key:(0,yt.Z)(),createdAt:new Date,extend_text:null===e||void 0===e?void 0:e.contentText,autoplaying:0}),n.emit("typing_from_client_off",{roomId:a,data:r,typing:!1}),wt(j.Z.get("uid"),a,(0,yt.Z)(),s,a,"text_to_voice","",null===e||void 0===e?void 0:e.contentText),_t(a),null===e||void 0===e||e.setContentText((function(){return""})),null===e||void 0===e||e.sendNewMessage();case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Rt,(0,D.Z)((0,D.Z)({},e),{},{sendMessage:l})),!0===(null===r||void 0===r?void 0:r.isDeaf)&&(0,f.jsx)("div",{title:"Send text voice",className:"dfjdkdjskjkdjkgfljdadsas",style:{display:"flex",justifyContent:"center",alignItems:"center",gap:10,paddingLeft:16},children:(0,f.jsx)(S.Z,{onClick:function(){u(),null===e||void 0===e||e.newestMessage()},variant:"primary",children:(0,f.jsx)(Ft.ldP,{})})}),(0,f.jsx)("div",{className:"dfjdkdjskjkdjkgfljdadsas",style:{display:"flex",justifyContent:"center",alignItems:"center",gap:10,paddingLeft:16},children:(0,f.jsx)(S.Z,{onClick:function(){l(),null===e||void 0===e||e.newestMessage()},disabled:!((null===e||void 0===e||null===(t=e.contentText)||void 0===t?void 0:t.length)>0),variant:"primary",children:"G\u1eedi"})})]})},Et=(0,o.memo)(Ot),Mt=(0,o.memo)((function(e){var t=(0,d.UO)().idConversation,n=(0,o.useState)(!1),i=(0,r.Z)(n,2),s=i[0],a=i[1],l=(0,o.useState)(),u=(0,r.Z)(l,2),c=u[0],v=u[1],h=(0,o.useContext)(q).socketState,p=(0,o.useState)((function(){return 0})),j=(0,r.Z)(p,2),x=j[0],m=j[1];(0,o.useEffect)((function(){h.on("broadcast_to_all_user_in_room_typing",(function(e){a(e.data.typing),v(e.data.data.username)}))}),[h]);return(0,f.jsxs)("div",{className:"fjdkjgjdksdjdksa",style:{width:"100%",height:68,padding:16,borderTop:"1px solid #d7d7d7",display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative"},children:[(0,f.jsx)(Tt,(0,D.Z)({},e)),(0,f.jsx)(Et,(0,D.Z)({newestMessage:function(){h.emit("update_newest_message",{roomId:t,lastUpdate:(new Date).toLocaleString("en-US",{timeZone:"Asia/Ho_Chi_Minh"})})},sendNewMessage:function(){m((function(e){return parseInt(e)+1})),h.emit("send_new_message",{roomId:t,idConversation:t,unSeenMessage:parseInt(x)+1})}},e)),!0===s&&(0,f.jsx)(Zt,{userTyping:c})]})})),Dt=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:"".concat(x.LB,"/api/users/request/status/")+t,method:"get",params:{userId:j.Z.get("uid")},headers:{authorization:"Bearer "+j.Z.get("accessToken")}});case 2:return n=e.sent,e.next=5,n.data;case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Wt=Dt,qt=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n){var s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:"".concat(x.LB,"/api/users/cancel-add-friend/").concat(t),method:"post",headers:{authorization:"Bearer "+j.Z.get("accessToken")},data:{userId:j.Z.get("uid")}});case 2:return s=e.sent,e.next=5,s.data;case 5:return e.sent,e.abrupt("return",n((function(e){return!e})));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ut=qt,Ht=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n){var s,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:x.LB+"/api/users/accept-add-friend/"+t,method:"post",data:{userId:j.Z.get("uid")},headers:{authorization:"Bearer "+j.Z.get("accessToken")}});case 2:return s=e.sent,e.next=5,s.data;case 5:return r=e.sent,console.log(r),e.abrupt("return",n("C\xe1c b\u1ea1n hi\u1ec7n \u0111\xe3 tr\u1edf th\xe0nh b\u1ea1n b\xe8 c\u1ee7a nhau"));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Gt=Ht,Kt=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n){var s,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:x.LB+"/api/users/denied-add-friend/"+t,method:"post",data:{userId:j.Z.get("uid")},headers:{authorization:"Bearer "+j.Z.get("accessToken")}});case 2:return s=e.sent,e.next=5,s.data;case 5:return r=e.sent,console.log(r),e.abrupt("return",n("\u0110\xe3 t\u1eeb ch\u1ed1i l\u1eddi m\u1eddi k\u1ebft b\u1ea1n"));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Vt=Kt,Qt=(0,o.memo)((function(e){var t,n,i,s,a,d,l,c,v,h,p=(0,o.useState)(!1),x=(0,r.Z)(p,2),m=x[0],g=x[1],k=(0,o.useContext)(q).socketState,y=(0,o.useContext)(qn).setInComingCall,Z=(0,o.useMemo)((function(){return(0,yt.Z)().replaceAll("-","")}),[]),b=(0,o.useContext)(Kn).data;return(0,o.useEffect)((function(){k.on("end_call_from_sender",(function(){y((function(){return!1}))}))}),[k,y]),(0,f.jsxs)("div",{className:"fdjdhsdjkvhsjkhaassa",style:{width:"100%",height:60,borderBottom:"1px solid #e7e7e7",padding:"0 16px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,f.jsxs)("div",{className:"fkjdjkdjdkjdkssa",style:{display:"flex",justifyContent:"center",alignItems:"center",gap:10,cursor:"pointer"},onClick:function(){return g((function(e){return!e}))},children:[(0,f.jsx)("img",{src:e.imageGroup?e.imageGroup:(null===e||void 0===e||null===(t=e.member)||void 0===t||null===(n=t.filter((function(e){return(null===e||void 0===e?void 0:e._id)!==j.Z.get("uid")})))||void 0===n||null===(i=n[0])||void 0===i||null===(s=i.profilePicture)||void 0===s?void 0:s.length)>0?null===e||void 0===e||null===(a=e.member)||void 0===a||null===(d=a.filter((function(e){return(null===e||void 0===e?void 0:e._id)!==j.Z.get("uid")})))||void 0===d||null===(l=d[0])||void 0===l?void 0:l.profilePicture:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png",alt:"Can't open",style:{width:48,height:48,borderRadius:"50%",objectFit:"cover",border:"1px solid #d7d7d7"}}),(0,f.jsx)("div",{className:"fjsdhjgjkdksdas",style:{fontWeight:600,fontSize:18},children:e.label?e.label:null===e||void 0===e||null===(c=e.member)||void 0===c||null===(v=c.filter((function(e){return(null===e||void 0===e?void 0:e._id)!==j.Z.get("uid")})))||void 0===v||null===(h=v[0])||void 0===h?void 0:h.username}),!0===m&&(0,f.jsx)(Xt,(0,D.Z)({is_show_info_group:!0,open:m,setOpen:g,socketState:k},e))]}),(0,f.jsxs)("div",{className:"fjskdjskdfjsksd",style:{display:"flex",justifyContent:"center",alignItems:"center",gap:30},children:[!0===(null===e||void 0===e?void 0:e.isCall)&&(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("div",{onClick:function(){null===e||void 0===e||e.setIsCall((function(){return!1})),k.emit("sender_end_call",{call_id:Z})},title:"K\u1ebft th\xfac cu\u1ed9c g\u1ecdi",style:{display:"flex",justifyContent:"center",alignItems:"center",width:40,height:40,background:"#f2f0f5",borderRadius:"50%",cursor:"pointer"},children:(0,f.jsx)(ot.P8R,{style:{width:24,height:24}})})}),!1===(null===e||void 0===e?void 0:e.isCall)&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{onClick:function(){var t,n,i;null===e||void 0===e||e.setAudio((function(){return!0})),null===e||void 0===e||e.setVideo((function(){return!1})),k.emit("start_call",{call_id:Z,user_to_call:null===e||void 0===e||null===(t=e.member)||void 0===t||null===(n=t.filter((function(e){return(null===e||void 0===e?void 0:e._id)!==j.Z.get("uid")})))||void 0===n||null===(i=n[0])||void 0===i?void 0:i._id,senderInfo:{profilePicture:null===b||void 0===b?void 0:b.profilePicture,username:null===b||void 0===b?void 0:b.username}}),null===e||void 0===e||e.setIsCall((function(){return!0})),null===e||void 0===e||e.setCallId((function(){return Z}))},title:"B\u1eaft \u0111\u1ea7u m\u1ed9t cu\u1ed9c g\u1ecdi audio",style:{display:"flex",justifyContent:"center",alignItems:"center",width:40,height:40,background:"#f2f0f5",borderRadius:"50%",cursor:"pointer"},children:(0,f.jsx)(ot.fFs,{style:{width:24,height:24}})}),(0,f.jsx)("div",{onClick:function(){var t,n,i;null===e||void 0===e||e.setAudio((function(){return!0})),null===e||void 0===e||e.setVideo((function(){return!0})),k.emit("start_call",{call_id:Z,user_to_call:null===e||void 0===e||null===(t=e.member)||void 0===t||null===(n=t.filter((function(e){return(null===e||void 0===e?void 0:e._id)!==j.Z.get("uid")})))||void 0===n||null===(i=n[0])||void 0===i?void 0:i._id,senderInfo:{profilePicture:null===b||void 0===b?void 0:b.profilePicture,username:null===b||void 0===b?void 0:b.username}}),null===e||void 0===e||e.setIsCall((function(){return!0})),null===e||void 0===e||e.setCallId((function(){return Z}))},title:"B\u1eaft \u0111\u1ea7u m\u1ed9t cu\u1ed9c g\u1ecdi video",style:{display:"flex",justifyContent:"center",alignItems:"center",width:40,height:40,background:"#f2f0f5",borderRadius:"50%",cursor:"pointer"},children:(0,f.jsx)(u.dKm,{style:{width:24,height:24}})})]}),(0,f.jsx)("div",{onClick:function(){return null===e||void 0===e?void 0:e.setExtend((function(e){return!e}))},title:"M\u1edf r\u1ed9ng",style:{display:"flex",justifyContent:"center",alignItems:"center",width:40,height:40,background:"#f2f0f5",borderRadius:"50%",cursor:"pointer"},children:(0,f.jsx)(u.evw,{style:{width:24,height:24}})})]})]})})),Yt=function(e){var t,n,i=(0,o.useRef)(),s=(0,o.useMemo)((function(){return{page:1,limit:9}}),[]),a=(0,o.useContext)(q).socketState,l=(0,d.UO)().idConversation,u=(0,o.useState)((function(){return""})),c=(0,r.Z)(u,2),v=c[0],h=c[1],p=(0,o.useState)((function(){return[]})),j=(0,r.Z)(p,2),x=j[0],m=j[1];return(0,o.useEffect)((function(){le(l,m,s)}),[l,s]),(0,o.useEffect)((function(){a.on("broadcast_to_all_user_in_room",(function(e){m((function(t){return[].concat((0,X.Z)(t),[e])}))}))}),[a]),(0,f.jsx)("div",{className:"jdahdjksdhjashasjfda",style:{flex:"1 1 0"},children:(0,f.jsxs)("div",{className:"fjskdjkfjdkjadkjsas",style:{width:"100%",height:"100%",maxHeight:"100vh"},children:[(0,f.jsx)(Qt,(0,D.Z)((0,D.Z)({setCallId:null===e||void 0===e?void 0:e.setCallId,setIsCall:null===e||void 0===e?void 0:e.setIsCall,isCall:null===e||void 0===e?void 0:e.isCall,setExtend:null===e||void 0===e?void 0:e.setExtend,setChange:null===e||void 0===e?void 0:e.setChange},null===e||void 0===e?void 0:e.conversation),{},{avtChat:null===e||void 0===e||null===(t=e.conversation)||void 0===t?void 0:t.imageGroup,name:null===e||void 0===e||null===(n=e.conversation)||void 0===n?void 0:n.label,setVideo:null===e||void 0===e?void 0:e.setVideo,setAudio:null===e||void 0===e?void 0:e.setAudio})),(0,f.jsx)(pt,{refScroll:i,listMessage:x}),(0,f.jsx)(Mt,{refScroll:i,contentText:v,setContentText:h})]})})},Xt=function(e){var t,n,a,d,l,u,c,v,h,p,x,m,g,k,y,Z,b,w,C,_,N,I,B,P,T,z,R,F,A,L,O=(0,o.useState)(),E=(0,r.Z)(O,2),M=E[0],W=E[1],q=(0,o.useState)(),U=(0,r.Z)(q,2),H=U[0],G=U[1],K=(0,o.useState)(),V=(0,r.Z)(K,2),Q=V[0],Y=V[1],X=(0,o.useContext)(Kn),ee=X.setChange,ne=X.data;(0,o.useEffect)((function(){e.createdBy&&(j.Z.get("uid")===(null===e||void 0===e?void 0:e.createdBy)?G(!0):G(!1))}),[null===e||void 0===e?void 0:e.createdBy]),(0,o.useEffect)((function(){e._id&&ie(e._id,Y)}),[e._id]),(0,o.useEffect)((function(){var t,n,i,s;!1===(null===Q||void 0===Q?void 0:Q.duplicate)&&(null===e||void 0===e||null===(t=e.socketState)||void 0===t||t.emit("send_request_friend",{destination_user_id:null===e||void 0===e||null===(n=e.member)||void 0===n||null===(i=n.filter((function(e){return(null===e||void 0===e?void 0:e._id)!==j.Z.get("uid")})))||void 0===i||null===(s=i[0])||void 0===s?void 0:s._id,sender_user_id:j.Z.get("uid")}))}),[null===Q||void 0===Q?void 0:Q.duplicate,null===e||void 0===e?void 0:e.member,null===e||void 0===e?void 0:e.socketState]),(0,o.useEffect)((function(){var t,n,i,s;!0===(null===ne||void 0===ne||null===(t=ne.friends)||void 0===t?void 0:t.includes(null===e||void 0===e||null===(n=e.member)||void 0===n||null===(i=n.filter((function(e){return(null===e||void 0===e?void 0:e._id)!==j.Z.get("uid")})))||void 0===i||null===(s=i[0])||void 0===s?void 0:s._id))?W((function(){return!0})):W((function(){return!1}))}),[null===ne||void 0===ne?void 0:ne.friends,null===e||void 0===e?void 0:e.member]);var se=(0,o.useState)(!1),ae=(0,r.Z)(se,2),de=ae[0],le=ae[1],ue=(0,o.useState)(""),ve=(0,r.Z)(ue,2),pe=ve[0],je=ve[1],xe=(0,o.useState)(),me=(0,r.Z)(xe,2),ge=me[0],ke=me[1],ye=(0,o.useState)(),Ze=(0,r.Z)(ye,2),be=(Ze[0],Ze[1]),we=(0,o.useState)(null===ne||void 0===ne?void 0:ne.friendsQueue),Ne=(0,r.Z)(we,2),Ie=Ne[0],Se=(Ne[1],(0,o.useState)()),Be=(0,r.Z)(Se,2),Pe=Be[0],Te=Be[1],ze=(0,o.useState)(!1),Re=(0,r.Z)(ze,2),Fe=Re[0],Ae=Re[1],Le=(0,o.useState)("Xin ch\xe0o, t\xf4i l\xe0 "+(null===ne||void 0===ne?void 0:ne.username)),Oe=(0,r.Z)(Le,2),Ee=Oe[0],De=Oe[1],We=(0,o.useState)(null===e||void 0===e||null===(t=e.member)||void 0===t||null===(n=t.filter((function(e){return(null===e||void 0===e?void 0:e._id)!==j.Z.get("uid")})))||void 0===n?void 0:n[0]),qe=(0,r.Z)(We,2),Ue=qe[0];qe[1];return(0,o.useEffect)((function(){(0,s.Z)((0,i.Z)().mark((function t(){var n,s,r,a;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Wt(null===e||void 0===e||null===(n=e.member)||void 0===n||null===(s=n.filter((function(e){return(null===e||void 0===e?void 0:e._id)!==j.Z.get("uid")})))||void 0===s||null===(r=s[0])||void 0===r?void 0:r._id);case 2:return a=t.sent,t.abrupt("return",Te(a));case 4:case"end":return t.stop()}}),t)})))()}),[null===e||void 0===e?void 0:e.member]),(0,f.jsx)("div",{className:"fkjldsklkdsslaskdsaa",style:{width:"100%",height:"100%",position:"fixed",top:0,left:0,background:"rgba(0 ,0 ,0,0.3)",zIndex:12,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,f.jsx)(J.default,{onOutsideClick:function(){return e.setOpen((function(){return!1}))},children:(0,f.jsx)("div",{style:{overflow:"hidden",borderRadius:10},children:(0,f.jsx)("div",{className:"fjlkdsjdkljsdklaskd",style:{padding:16,background:"#fff",borderRadius:5,width:"100vw",maxWidth:450,maxHeight:"90vh",overflow:"auto"},onClick:function(e){e.stopPropagation()},children:(0,f.jsxs)("div",{style:{width:"100%",height:"100%"},children:[(0,f.jsxs)("div",{className:"jdjadkjgkddssa",style:{width:"100%",height:68,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,f.jsx)("div",{className:"dkldjskldjkasdasa",style:{fontWeight:600,fontSize:18},children:e.label?e.label:null===e||void 0===e||null===(a=e.member)||void 0===a||null===(d=a.filter((function(e){return(null===e||void 0===e?void 0:e._id)!==j.Z.get("uid")})))||void 0===d||null===(l=d[0])||void 0===l?void 0:l.username}),(0,f.jsx)("div",{onClick:function(t){t.stopPropagation(),null===e||void 0===e||e.setOpen((function(){return!1}))},style:{display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",padding:10},children:(0,f.jsx)($.nfZ,{})})]}),(0,f.jsx)(he,{coverPhoto:null===e||void 0===e?void 0:e.coverPhoto}),(0,f.jsx)(fe,{avatar:e.imageGroup?e.imageGroup:null===e||void 0===e||null===(u=e.member)||void 0===u||null===(c=u.filter((function(e){return(null===e||void 0===e?void 0:e._id)!==j.Z.get("uid")})))||void 0===c||null===(v=c[0])||void 0===v?void 0:v.profilePicture}),(0,f.jsx)(Ce,{username:e.label?e.label:null===e||void 0===e||null===(h=e.member)||void 0===h||null===(p=h.filter((function(e){return(null===e||void 0===e?void 0:e._id)!==j.Z.get("uid")})))||void 0===p||null===(x=p[0])||void 0===x?void 0:x.username}),(null===e||void 0===e||null===(m=e.member)||void 0===m?void 0:m.length)<=2&&(0,f.jsx)(f.Fragment,{children:!1===Fe&&(0,f.jsx)(_e,{user:{gender:null===Ue||void 0===Ue?void 0:Ue.gender,phoneNumber:null===Ue||void 0===Ue?void 0:Ue.phoneNumber,address:null===Ue||void 0===Ue?void 0:Ue.address}})}),(0,f.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",gap:16},children:[!0===M&&!(null!==e&&void 0!==e&&e.label)&&!0===(null===ne||void 0===ne||null===(g=ne.friends)||void 0===g?void 0:g.includes(null===e||void 0===e||null===(k=e.member)||void 0===k||null===(y=k.filter((function(e){return(null===e||void 0===e?void 0:e._id)!==j.Z.get("uid")})))||void 0===y||null===(Z=y[0])||void 0===Z?void 0:Z._id))&&(0,f.jsx)(S.Z,{onClick:function(){var t,n,i;Me(null===e||void 0===e||null===(t=e.member)||void 0===t||null===(n=t.filter((function(e){return(null===e||void 0===e?void 0:e._id)!==j.Z.get("uid")})))||void 0===n||null===(i=n[0])||void 0===i?void 0:i._id,Y),window.location.reload()},variant:"primary",children:"H\u1ee7y k\u1ebft b\u1ea1n"}),!(null!==e&&void 0!==e&&e.label)&&!1===(null===ne||void 0===ne||null===(b=ne.friends)||void 0===b?void 0:b.includes(null===e||void 0===e||null===(w=e.member)||void 0===w||null===(C=w.filter((function(e){return(null===e||void 0===e?void 0:e._id)!==j.Z.get("uid")})))||void 0===C||null===(_=C[0])||void 0===_?void 0:_._id))&&(0,f.jsxs)(f.Fragment,{children:[!0===(null===Ie||void 0===Ie?void 0:Ie.includes(null===e||void 0===e||null===(N=e.member)||void 0===N||null===(I=N.filter((function(e){return(null===e||void 0===e?void 0:e._id)!==j.Z.get("uid")})))||void 0===I||null===(B=I[0])||void 0===B?void 0:B._id))&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(S.Z,{disabled:!0===(null===Q||void 0===Q?void 0:Q.duplicate),onClick:function(){var t,n,i;return Gt(null===e||void 0===e||null===(t=e.member)||void 0===t||null===(n=t.filter((function(e){return(null===e||void 0===e?void 0:e._id)!==j.Z.get("uid")})))||void 0===n||null===(i=n[0])||void 0===i?void 0:i._id,Y)},variant:"primary",children:(0,f.jsx)(f.Fragment,{children:"Ch\u1ea5p nh\u1eadn"})}),(0,f.jsx)(S.Z,{disabled:!0===(null===Q||void 0===Q?void 0:Q.duplicate),onClick:function(){var t,n,i;return Vt(null===e||void 0===e||null===(t=e.member)||void 0===t||null===(n=t.filter((function(e){return(null===e||void 0===e?void 0:e._id)!==j.Z.get("uid")})))||void 0===n||null===(i=n[0])||void 0===i?void 0:i._id,Y)},variant:"secondary",children:(0,f.jsx)(f.Fragment,{children:"T\u1eeb ch\u1ed1i"})})]}),!0===(null===Pe||void 0===Pe?void 0:Pe.request)&&!0===(null===Pe||void 0===Pe?void 0:Pe.duplicate)&&(0,f.jsx)(S.Z,{disabled:!0===(null===Q||void 0===Q?void 0:Q.duplicate),onClick:function(){var t,n,i;Ae((function(){return!1})),Te({request:!1,duplicate:!1}),Ut(null===e||void 0===e||null===(t=e.member)||void 0===t||null===(n=t.filter((function(e){return(null===e||void 0===e?void 0:e._id)!==j.Z.get("uid")})))||void 0===n||null===(i=n[0])||void 0===i?void 0:i._id,ee)},variant:"secondary",children:(0,f.jsx)(f.Fragment,{children:"H\u1ee7y l\u1eddi m\u1eddi"})}),!1===(null===Ie||void 0===Ie?void 0:Ie.includes(null===e||void 0===e||null===(P=e.member)||void 0===P||null===(T=P.filter((function(e){return(null===e||void 0===e?void 0:e._id)!==j.Z.get("uid")})))||void 0===T||null===(z=T[0])||void 0===z?void 0:z._id))&&!1===(null===Pe||void 0===Pe?void 0:Pe.request)&&(0,f.jsxs)(f.Fragment,{children:[!1===Fe&&(0,f.jsx)(S.Z,{disabled:!0===(null===Q||void 0===Q?void 0:Q.duplicate),onClick:function(){Ae((function(){return!0}))},variant:"primary",children:(0,f.jsx)(f.Fragment,{children:"Th\xeam b\u1ea1n b\xe8"})}),!0===Fe&&(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{style:{width:"100%"},children:[(0,f.jsx)("div",{style:{width:"100%",marginBottom:12},children:(0,f.jsx)("textarea",{autoFocus:!0,value:Ee,onChange:function(e){return De(e.target.value)},style:{width:"100%",fontSize:16,padding:10,resize:"none",border:"1px solid #e7e7e7",outlineColor:"#2e89ff",maxHeight:200,overflow:"auto"},rows:4,cols:4})}),(0,f.jsxs)("div",{className:"c-flex-center",style:{gap:10},children:[(0,f.jsx)(S.Z,{disabled:!0===(null===Q||void 0===Q?void 0:Q.duplicate),onClick:function(){var t,n,i;Te({request:!0,duplicate:!0}),oe(null===e||void 0===e||null===(t=e.member)||void 0===t||null===(n=t.filter((function(e){return(null===e||void 0===e?void 0:e._id)!==j.Z.get("uid")})))||void 0===n||null===(i=n[0])||void 0===i?void 0:i._id,Y)},variant:"primary",children:(0,f.jsx)(f.Fragment,{children:"K\u1ebft b\u1ea1n"})}),(0,f.jsx)(S.Z,{disabled:!0===(null===Q||void 0===Q?void 0:Q.duplicate),onClick:function(){Ae((function(){return!1}))},variant:"secondary",children:(0,f.jsx)(f.Fragment,{children:"H\u1ee7y"})})]})]})})]})]})]}),(null===e||void 0===e?void 0:e.label)&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,f.jsx)(S.Z,{color:"primary",onClick:function(e){e.stopPropagation(),le((function(){return!0}))},children:"Th\xeam th\xe0nh vi\xean"})}),(0,f.jsx)("br",{}),!0===de&&(0,f.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:12},children:[(0,f.jsx)("input",{value:pe,onChange:function(e){return je(e.target.value)},onClick:function(e){return e.stopPropagation()},type:"text",style:{width:"100%",height:40,borderRadius:80,outlineColor:"#2e89ff",padding:10},placeholder:"T\xecm s\u1ed1 \u0111i\u1ec7n tho\u1ea1i ng\u01b0\u1eddi c\u1ea7n th\xeam"}),(0,f.jsx)("br",{}),(0,f.jsx)(S.Z,{onClick:function(e){e.stopPropagation(),ce(pe,ke)},color:"primary",children:"T\xecm"}),ge&&(0,f.jsxs)(o.Fragment,{children:[(0,f.jsx)(he,{coverPhoto:null===ge||void 0===ge?void 0:ge.coverPhoto}),(0,f.jsx)(fe,{avatar:null===ge||void 0===ge?void 0:ge.profilePicture}),(0,f.jsx)(Ce,{username:null===ge||void 0===ge?void 0:ge.username}),(0,f.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",gap:16},children:(0,f.jsx)(S.Z,{onClick:function(t){t.stopPropagation(),te(null===e||void 0===e?void 0:e.id_conversation,null===ge||void 0===ge?void 0:ge._id,be)},variant:"primary",children:"Th\xeam th\xe0nh vi\xean"})}),(0,f.jsx)(_e,{user:ge}),(0,f.jsx)("br",{}),(0,f.jsx)("div",{style:{width:"100%",display:"flex",flexDirection:"row-reverse",alignItems:"center",gap:16},children:(0,f.jsx)(S.Z,{onClick:function(){},variant:"primary",children:"Th\xeam"})})]})]})]}),(null===e||void 0===e?void 0:e.label)&&(0,f.jsxs)("div",{style:{width:"100%"},children:[(0,f.jsx)("div",{style:{fontWeight:600,marginBottom:8,width:"100%"},children:"Tr\u01b0\u1edfng nh\xf3m"}),(0,f.jsx)("div",{style:{width:"100%",maxHeight:200,overflow:"auto"},children:null===e||void 0===e||null===(R=e.member)||void 0===R||null===(F=R.filter((function(t){return(null===t||void 0===t?void 0:t._id)===(null===e||void 0===e?void 0:e.createdBy)})))||void 0===F?void 0:F.map((function(t,n){return(0,f.jsx)($t,(0,D.Z)({setResult:null===e||void 0===e?void 0:e.setChange,id_conversation:null===e||void 0===e?void 0:e.id_conversation,my_id:j.Z.get("uid"),createdBy:null===e||void 0===e?void 0:e.createdBy,is_group:!0,isHostGroup:H},t),(null===t||void 0===t?void 0:t._id)||n)}))})]}),(null===e||void 0===e?void 0:e.label)&&(0,f.jsxs)("div",{style:{width:"100%"},children:[(0,f.jsx)("div",{style:{fontWeight:600,marginBottom:8,width:"100%"},children:"Th\xe0nh vi\xean nh\xf3m"}),(0,f.jsx)("div",{style:{width:"100%",maxHeight:200,overflow:"auto"},children:null===e||void 0===e||null===(A=e.member)||void 0===A||null===(L=A.filter((function(t){return(null===t||void 0===t?void 0:t._id)!==(null===e||void 0===e?void 0:e.createdBy)})))||void 0===L?void 0:L.map((function(t,n){return(0,f.jsx)($t,(0,D.Z)({setResult:null===e||void 0===e?void 0:e.setChange,id_conversation:null===e||void 0===e?void 0:e.id_conversation,my_id:j.Z.get("uid"),is_group:!0,isHostGroup:H},t),(null===t||void 0===t?void 0:t._id)||n)}))})]}),(null===e||void 0===e?void 0:e.label)&&!1===H&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("br",{}),(0,f.jsx)("div",{className:"fjkladjkljdkldas",style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,f.jsx)(S.Z,{onClick:function(){return re(null===e||void 0===e?void 0:e.id_conversation,ee)},color:"primary",children:"R\u1eddi nh\xf3m"})})]})]})})})})})},$t=function(e){return(0,f.jsx)(st,(0,D.Z)({},e))},Jt=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n){var s,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:"".concat(x.LB,"/api/conversations/search/").concat(t),method:"post",data:{userId:j.Z.get("uid")}});case 2:return s=e.sent,e.next=5,s.data;case 5:return r=e.sent,e.abrupt("return",n(r));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),en=Jt,tn=function(e){var t=(0,o.useState)((function(){return""})),n=(0,r.Z)(t,2),i=n[0],s=n[1],a=i.length>0,d=(0,o.useState)(!1),l=(0,r.Z)(d,2),u=l[0],c=l[1],v=(0,o.useState)(),h=(0,r.Z)(v,2),p=h[0],j=h[1];return(0,f.jsxs)("div",{className:"fkjlasdjsklsajaksas",style:{width:!0===(null===e||void 0===e?void 0:e.isCall)?0:350,padding:"16px 0 0 0",height:"100vh",borderRight:"1px solid #e7e7e7"},children:[(0,f.jsx)(nn,{isCall:null===e||void 0===e?void 0:e.isCall,setChange:c,searchQuery:i,setSearchQuery:s,setData:j}),!0===e.is_friend_page&&(0,f.jsx)(at,{}),!0===e.is_chat_page&&(0,f.jsx)(et,{search_conversation:!0,searchQuery:i,change:u,is_friend_page:e.is_friend_page,isSearching:a,data:p})]})},nn=function(e){return(0,f.jsxs)("div",{className:"fmkldjskldjklfsass",style:{width:"100%",display:!1===(null===e||void 0===e?void 0:e.isCall)?"flex":"none",justifyContent:"center",alignItems:"center",position:"relative",marginBottom:20,padding:"0 16px"},children:[(0,f.jsx)(sn,(0,D.Z)({},e)),(0,f.jsx)(rn,{}),(0,f.jsx)(an,{setChange:null===e||void 0===e?void 0:e.setChange})]})},sn=function(e){return(0,f.jsxs)("div",{className:"fjladjkldgjkljdasda",style:{flex:"1 1 0",height:40},children:[(0,f.jsx)("input",{onKeyUp:function(t){return en(t.target.value,e.setData)},onChange:function(t){return e.setSearchQuery(t.target.value)},value:e.searchQuery,style:{width:"100%",height:"100%",background:"#d9d9d9",outlineColor:"#2e89ff",borderRadius:5,padding:"10px 30px"},placeholder:"T\xecm ki\u1ebfm"}),(0,f.jsx)("div",{style:{display:" flex",justifyContent:" center",alignItems:"center",position:"absolute",top:"50%",left:0,transform:"translate(50%, -50%)",marginLeft:16},children:(0,f.jsx)(l.RB5,{})})]})},rn=function(e){var t=(0,o.useState)((function(){return!1})),n=(0,r.Z)(t,2),i=n[0],s=n[1];return(0,f.jsxs)("div",{title:"Th\xeam b\u1ea1n",className:"fkjdjkshklsajass",style:{cursor:"pointer",width:40,height:40,display:"flex",justifyContent:"center",alignItems:"center",marginLeft:16},children:[(0,f.jsx)(l.vM4,{style:{width:32,height:32},onClick:function(){return s((function(){return!0}))}}),!0===i&&(0,f.jsx)(on,{open:i,setOpen:s})]})},an=function(e){var t=(0,o.useState)((function(){return!1})),n=(0,r.Z)(t,2),i=n[0],s=n[1];return(0,f.jsxs)("div",{title:"T\u1ea1o nh\xf3m",className:"fdlkjsjdaklsjfdkaljsa",style:{cursor:"pointer",width:40,height:40,display:"flex",justifyContent:"center",alignItems:"center",marginLeft:16},children:[(0,f.jsx)(l.Zev,{style:{width:32,height:32},onClick:function(){return s((function(){return!0}))}}),!0===i&&(0,f.jsx)(dn,{setChange:null===e||void 0===e?void 0:e.setChange,open:i,setOpen:s})]})},on=function(e){var t=(0,o.useState)(),n=(0,r.Z)(t,2),i=n[0],s=n[1],a=(0,o.useState)({exist:-1}),d=(0,r.Z)(a,2),l=d[0],u=d[1],c=(0,o.useState)(),v=(0,r.Z)(c,2),h=v[0],p=v[1];return(0,f.jsx)("div",{className:"fkjldsklkdsslaskdsaa",style:{width:"100%",height:"100%",position:"fixed",top:0,left:0,background:"rgba(0 ,0 ,0,0.3)",zIndex:12,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,f.jsx)(J.default,{onOutsideClick:function(){return e.setOpen((function(){return!1}))},children:(0,f.jsx)("div",{className:"fjlkdsjdkljsdklaskd",style:{padding:16,background:"#fff",borderRadius:5,width:"100vw",maxWidth:450},children:(0,f.jsxs)("div",{style:{width:"100%",height:"100%"},children:[(0,f.jsxs)("div",{className:"jdjadkjgkddssa",style:{width:"100%",height:68,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,f.jsx)("strong",{children:"Th\xeam b\u1ea1n"}),(0,f.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},onClick:function(){return e.setOpen((function(){return!1}))},children:(0,f.jsx)($.nfZ,{})})]}),!0===(null===l||void 0===l?void 0:l.exist)&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(he,{coverPhoto:null===l||void 0===l?void 0:l.coverPhoto}),(0,f.jsx)(fe,{avatar:null===l||void 0===l?void 0:l.profilePicture}),(0,f.jsx)(Ce,{username:null===l||void 0===l?void 0:l.username}),(0,f.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",gap:16},children:(null===l||void 0===l?void 0:l._id)!==j.Z.get("uid")&&(0,f.jsx)(S.Z,{onClick:function(){},variant:"secondary",children:"Nh\u1eafn tin"})}),(0,f.jsx)(_e,{user:l}),(0,f.jsx)("br",{}),(0,f.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"row-reverse",alignItems:"center",gap:16},children:[(null===l||void 0===l?void 0:l._id)!==j.Z.get("uid")&&(0,f.jsx)(S.Z,{onClick:function(){return oe(null===l||void 0===l?void 0:l._id,p)},variant:"primary",children:"K\u1ebft b\u1ea1n"}),(0,f.jsx)(S.Z,{onClick:function(){return e.setOpen((function(){return!1}))},variant:"secondary",children:"\u0110\xf3ng"})]}),!0===(null===h||void 0===h?void 0:h.request)&&!0===(null===h||void 0===h?void 0:h.duplicate)&&(0,f.jsx)("div",{style:{fontSize:14},children:"B\u1ea1n \u0111\xe3 g\u1eedi y\xeau c\u1ea7u k\xeat b\u1ea1n v\u1edbi ng\u01b0\u1eddi n\xe0y"}),!0===(null===h||void 0===h?void 0:h.request)&&!1===(null===h||void 0===h?void 0:h.duplicate)&&(0,f.jsx)("div",{style:{fontSiz:14},children:"G\u1eedi y\xeau c\u1ea7u k\u1ebft b\u1ea1n th\xe0nh c\xf4ng"}),!1===(null===h||void 0===h?void 0:h.request)&&!1===(null===h||void 0===h?void 0:h.duplicate)&&(0,f.jsx)("div",{style:{fontSi:14},children:"C\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i sau"})]}),!1===(null===l||void 0===l?void 0:l.exist)&&(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("div",{style:{textAlign:"center"},children:"Kh\xf4ng t\xecm th\u1ea5y ng\u01b0\u1eddi c\xf3 s\u1ed1 \u0111i\u1ec7n tho\u1ea1i n\xe0y"})}),-1===(null===l||void 0===l?void 0:l.exist)&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"jdjadkjgkddssa",style:{width:"100%",height:68,display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"column"},children:[(0,f.jsx)("div",{style:{marginBottom:8,width:"100%"},children:"T\xecm b\u1eb1ng s\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),(0,f.jsx)("input",{value:i,onChange:function(e){return s(e.target.value)},type:"text",style:{width:"100%",height:40,padding:10,background:"#d9d9d9",borderRadius:5,outlineColor:"#2e89ff"},placeholder:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"})]}),(0,f.jsx)("br",{}),(0,f.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"row-reverse",alignItems:"center",gap:16},children:[(0,f.jsx)(S.Z,{onClick:function(){var e;if((null===i||void 0===i||null===(e=i.trim())||void 0===e?void 0:e.length)<=0||!i)return F()("Th\xf4ng b\xe1o","Kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng s\u1ed1 \u0111i\u1ec7n tho\u1ea1i","error");ce(null===i||void 0===i?void 0:i.trim(),u)},variant:"primary",children:"X\xe1c nh\u1eadn"}),(0,f.jsx)(S.Z,{onClick:function(){return e.setOpen((function(){return!1}))},variant:"secondary",children:"H\u1ee7y"})]})]})]})})})})},dn=function(e){var t=(0,o.useState)(),n=(0,r.Z)(t,2),a=(n[0],n[1]),u=(0,o.useState)(),c=(0,r.Z)(u,2),v=c[0],h=c[1],p=(0,o.useContext)(Kn).data,j=(0,o.useState)((function(){return""})),m=(0,r.Z)(j,2),g=m[0],k=m[1],y=!!v,Z=(0,d.s0)(),b=(0,o.useState)((function(){return[]})),w=(0,r.Z)(b,2),C=w[0],_=w[1];(0,o.useEffect)((function(){p&&_((function(e){return[].concat((0,X.Z)(e),[null===p||void 0===p?void 0:p._id])}))}),[p]);var N=function(){var t=(0,s.Z)((0,i.Z)().mark((function t(){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(C.length<=1)){t.next=2;break}return t.abrupt("return",F()("Th\xf4ng b\xe1o","S\u1ed1 l\u01b0\u1ee3ng th\xe0nh vi\xean nh\xf3m ph\u1ea3i nhi\u1ec1u h\u01a1n m\u1ed9t ng\u01b0\u1eddi","error"));case 2:if(!(g.length<=0)){t.next=4;break}return t.abrupt("return",F()("Th\xf4ng b\xe1o","Kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 thi\u1ebfu t\xean nh\xf3m","error"));case 4:if(null===v||void 0===v||!v.img){t.next=14;break}return t.next=7,xe(v.img);case 7:return n=t.sent,t.next=10,Ae(g,C,null===p||void 0===p?void 0:p._id,n,a,Z).then((function(){return F()("Th\xf4ng b\xe1o","T\u1ea1o nh\xf3m th\xe0nh c\xf4ng","success")}));case 10:e.setOpen((function(){return!1})),null===e||void 0===e||e.setChange((function(){return function(e){return!e}})),t.next=18;break;case 14:return t.next=16,Ae(g,C,null===p||void 0===p?void 0:p._id,x.LS,a,Z).then((function(){return F()("Th\xf4ng b\xe1o","T\u1ea1o nh\xf3m th\xe0nh c\xf4ng","success")}));case 16:e.setOpen((function(){return!1})),null===e||void 0===e||e.setChange((function(){return function(e){return!e}}));case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,f.jsx)("div",{className:"fkjldsklkdsslaskdsaa",style:{width:"100%",height:"100%",position:"fixed",top:0,left:0,background:"rgba(0 ,0 ,0,0.3)",zIndex:12,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,f.jsx)(J.default,{onOutsideClick:function(){return e.setOpen((function(){return!1}))},children:(0,f.jsx)("div",{className:"fjlkdsjdkljsdklaskd",style:{padding:16,background:"#fff",borderRadius:5,width:"100vw",maxWidth:450},children:(0,f.jsxs)("div",{style:{width:"100%",height:"100%"},children:[(0,f.jsxs)("div",{className:"jdjadkjgkddssa",style:{width:"100%",height:68,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,f.jsx)("strong",{children:"T\u1ea1o m\u1ed9t cu\u1ed9c tr\xf2 chuy\u1ec7n"}),(0,f.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},onClick:function(){return e.setOpen((function(){return!1}))},children:(0,f.jsx)($.nfZ,{})})]}),(0,f.jsxs)("div",{className:"fksldjkghjkdskdas",style:{width:"100%",display:"flex",alignItems:"center",gap:8},children:[(0,f.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",width:48,height:48,position:"relative",border:"1px solid #e7e7e7",borderRadius:"50%"},children:[!0===y?(0,f.jsx)("img",{src:null===v||void 0===v?void 0:v.preview,alt:"open",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"}}):(0,f.jsx)(l.hOO,{}),(0,f.jsx)("input",{type:"file",onChange:function(e){h({img:e.target.files[0],preview:URL.createObjectURL(e.target.files[0]),key:e.target.files[0].lastModified})},style:{width:"100%",height:" 100%",top:0,left:0,position:"absolute",zIndex:12,cursor:"pointer",opacity:0},title:"Ch\u1ecdn \u1ea3nh \u0111\u1ea1i di\u1ec7n c\u1ee7a nh\xf3m"})]}),(0,f.jsx)("div",{className:"fsjfkjdkfkeakljes",style:{flex:" 1 1 0"},children:(0,f.jsx)("input",{value:g,onChange:function(e){return k(e.target.value)},className:"gjlkdjslkfjdkaslas",type:"text",style:{width:"100%",height:48,outlineColor:"#2e89ff"},placeholder:"Nh\u1eadp t\xean nh\xf3m"})})]}),(0,f.jsx)("br",{}),(0,f.jsxs)("div",{style:{width:"100%"},children:[(0,f.jsx)("div",{style:{marginBottom:12},children:"Th\xeam b\u1ea1n v\xe0o nh\xf3m"}),(0,f.jsxs)("div",{style:{width:"100%",position:"relative"},children:[(0,f.jsx)("input",{className:"fjskldjfdkdjskldas fijldkjlsfjhkldjksldas",placeholder:"Nh\u1eadp t\xean, s\u1ed1 \u0111i\u1ec7n tho\u1ea1i c\u1ea7n t\xecm",type:"text",style:{width:"100%",padding:"10px 36px",height:48,borderRadius:80}}),(0,f.jsx)(l.RB5,{style:{width:24,height:24,position:"absolute",top:"50%",left:0,transform:"translate(50%, -50%)"}})]})]}),(0,f.jsx)(it,{is_invite:!0,setArrayMember:_,arrayMember:C}),(0,f.jsx)("br",{}),(0,f.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"row-reverse",alignItems:"center",gap:10},children:[(0,f.jsx)(S.Z,{onClick:N,variant:"primary",children:"T\u1ea1o nh\xf3m"}),(0,f.jsx)(S.Z,{onClick:function(){return null===e||void 0===e?void 0:e.setOpen((function(){return!0}))},variant:"secondary",children:"H\u1ee7y"})]})]})})})})},ln=(0,o.memo)(tn),un=n(36661),cn=n(59962),vn=n.n(cn),fn=(0,un.createClient)({mode:"rtc",codec:"vp8"}),hn=(0,un.createMicrophoneAndCameraTracks)(),pn=function(e){var t=e.setInCall,n=e.channelName,a=e.appId,d=e.token,l=e.uid,u=e.video,c=e.audio,v=(0,o.useState)([]),h=(0,r.Z)(v,2),p=h[0],j=h[1],x=(0,o.useState)(!1),m=(0,r.Z)(x,2),g=m[0],k=m[1],y=fn(),Z=hn(),b=Z.ready,w=Z.tracks;return(0,o.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.on("user-published",function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n){var s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.subscribe(t,n);case 2:"video"===n&&j((function(e){return[].concat((0,X.Z)(e),[t])})),"audio"===n&&(null===(s=t.audioTrack)||void 0===s||s.play());case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),y.on("user-unpublished",(function(e,t){var n;"audio"===t&&(null===(n=e.audioTrack)||void 0===n||n.stop());"video"===t&&j((function(t){return t.filter((function(t){return t.uid!==e.uid}))}))})),y.on("user-left",(function(e){console.log("leaving",e),j((function(t){return t.filter((function(t){return t.uid!==e.uid}))}))})),e.next=5,y.join(a,t,d,l);case 5:if(!w){e.next=8;break}return e.next=8,y.publish([w[0],w[1]]);case 8:k(!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();b&&w&&e(n)}),[n,y,b,w,a,d,l]),(0,f.jsxs)("div",{className:"wrap-video-conversation",style:{height:"100vh",position:"relative"},children:[g&&w&&(0,f.jsx)(jn,{users:p,tracks:w}),b&&w&&(0,f.jsx)(xn,{tracks:w,setStart:k,setInCall:t,channelName:n,video:u,audio:c})]})},jn=(0,o.memo)((function(e){var t=e.users,n=e.tracks;return(0,f.jsx)("div",{className:"wrap-video",style:{width:"100%"},children:(0,f.jsxs)("div",{id:"videos",style:{width:"100%"},children:[(0,f.jsx)(vn(),{children:(0,f.jsxs)("div",{className:"wrap-me c-flex-center",style:{width:"25%",aspectRatio:1.5,position:"absolute",bottom:-25,right:0,flexDirection:"column",padding:10,zIndex:99},children:[(0,f.jsx)(un.AgoraVideoPlayer,{style:{height:"95%",width:"95%"},className:"vid",videoTrack:n[1]}),(0,f.jsx)("div",{style:{textAlign:"center",marginTop:8,fontWeight:600},children:"B\u1ea1n"})]})}),t.length>0&&t.map((function(e){return e.videoTrack?(0,f.jsx)(un.AgoraVideoPlayer,{style:{height:"95%",width:"95%"},className:"vid",videoTrack:e.videoTrack},e.uid):null})),(null===t||void 0===t?void 0:t.length)<=0&&(0,f.jsx)("div",{style:{height:"95%",width:"95%",borderRadius:10,border:"1px solid #e7e7e7",top:0,left:0}})]})})})),xn=function(e){var t=(0,o.useContext)(q).socketState,n=fn(),a=e.tracks,d=e.setStart,l=e.setInCall,c=e.channelName,v=e.video,h=e.audio,p=(0,o.useState)({video:v,audio:h}),j=(0,r.Z)(p,2),x=j[0],m=j[1];(0,o.useEffect)((function(){return function(){(0,s.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.leave();case 2:n.removeAllListeners(),a[0].close(),a[1].close(),d(!1),l(!1);case 7:case"end":return e.stop()}}),e)})))()}}),[n,l,d,a]);var g=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("audio"!==t){e.next=6;break}return e.next=3,a[0].setEnabled(!x.audio);case 3:m((function(e){return(0,D.Z)((0,D.Z)({},e),{},{audio:!e.audio})})),e.next=10;break;case 6:if("video"!==t){e.next=10;break}return e.next=9,a[1].setEnabled(!x.video);case 9:m((function(e){return(0,D.Z)((0,D.Z)({},e),{},{video:!e.video})}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=(0,o.useCallback)((0,s.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.leave();case 2:n.removeAllListeners(),a[0].close(),a[1].close(),d(!1),l(!1);case 7:case"end":return e.stop()}}),e)}))),[n,l,d,a]);return(0,o.useEffect)((function(){window.onbeforeunload=function(e){k(),t.emit("end_call",{call_id:c})}}),[c,t,k]),(0,f.jsxs)("div",{className:"controls",children:[(0,f.jsx)("p",{className:x.audio?"on mic-on mic-ui":"mic-off mic-ui",onClick:function(){return g("audio")},children:x.audio?(0,f.jsx)(u.fr_,{style:{marginBottom:10}}):(0,f.jsx)(u.$Jr,{style:{marginBottom:10}})}),(0,f.jsx)("p",{className:x.video?"on camera-on camera-ui":"camera-off camera-ui",onClick:function(){return g("video")},children:x.video?(0,f.jsx)(u.LsT,{style:{marginBottom:10}}):(0,f.jsx)(u.M$z,{style:{marginBottom:10}})}),(0,f.jsx)("p",{className:"end-call",style:{borderRadius:80},onClick:function(){k(),t.emit("end_call",{call_id:c})},children:(0,f.jsx)(ot.P8R,{})})]})},mn=function(e){var t=e.channelName,n=e.audio,d=e.video,l="019c2968a3da4efab5e709e7886b86c8",u=(0,o.useState)(""),c=(0,r.Z)(u,2),v=c[0],h=c[1],p="cfc8747ffd6040ad89bf114dcded44b5",m=(0,o.useState)(""),g=(0,r.Z)(m,2),k=g[0],y=g[1],Z=(0,o.useState)(!0),b=(0,r.Z)(Z,2),w=b[0],C=b[1];return(0,o.useEffect)((function(){(0,s.Z)((0,i.Z)().mark((function e(){var n,s,r,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,a.ZP)({url:x.LB+"/api/live/create/uid",method:"get",headers:{authorization:"Bearer "+j.Z.get("accessToken")},params:{appId:l,appCertificate:p,account:j.Z.get("uid")}});case 3:return n=e.sent,e.next=6,n.data;case 6:return s=e.sent,h(s.uid),e.next=10,(0,a.ZP)({url:x.LB+"/api/live/get_token",method:"get",headers:{authorization:"Bearer "+j.Z.get("accessToken")},params:{appId:l,channelName:t,appCertificate:p,uid:s.uid}});case 10:return r=e.sent,e.next=13,r.data;case 13:return o=e.sent,e.abrupt("return",y(o));case 17:return e.prev=17,e.t0=e.catch(0),e.abrupt("return",console.log(e.t0.message));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))()}),[t]),(0,f.jsx)("div",{className:"video-call-component",style:{width:"100%",maxWidth:1e3,borderRight:"1px solid #e7e7e7"},children:w&&(0,f.jsx)(pn,{setInCall:C,channelName:t,appId:l,token:k,uid:v,video:d,audio:n})})},gn=function(){var e,t,n,i,s=(0,o.useState)([]),a=(0,r.Z)(s,2),l=a[0],u=a[1],c=(0,d.UO)().idConversation;return(0,o.useEffect)((function(){V(c,u)}),[c]),(0,f.jsxs)("div",{className:"dskjdskdjskdsasa",style:{width:300,height:"100vh",borderLeft:"1px solid #e7e7e7"},children:[(0,f.jsx)("div",{className:"ssjdkjdskjsakssd",style:{width:"100%",height:60,borderBottom:"1px solid #e7e7e7",display:"flex",justifyContent:"center",alignItems:"center",fontSize:20},children:"Kho l\u01b0u tr\u1eef"}),(0,f.jsxs)("div",{style:{height:"calc(100vh - 60px)",overflow:"auto"},children:[(0,f.jsx)("div",{style:{padding:5,fontSize:18,fontWeight:600},children:"\u1ea2nh"}),(0,f.jsx)("div",{style:{width:"100%",display:"flex",alignItems:"center",flexWrap:"wrap"},children:null===l||void 0===l||null===(e=l.media)||void 0===e||null===(t=e.filter((function(e){return"image"===(null===e||void 0===e?void 0:e.type_message)})))||void 0===t?void 0:t.map((function(e,t){return(0,f.jsx)("div",{style:{width:"calc(100% / 3)",padding:5},children:(0,f.jsx)(v.rU,{to:"/media/"+(null===e||void 0===e?void 0:e.key),children:(0,f.jsx)("img",{src:e.message,style:{width:"100%",aspectRatio:1},alt:""})})},t)}))}),(0,f.jsx)("div",{style:{padding:5,fontSize:18,fontWeight:600},children:"File"}),null===l||void 0===l||null===(n=l.media)||void 0===n||null===(i=n.filter((function(e){return"file"===(null===e||void 0===e?void 0:e.type_message)})))||void 0===i?void 0:i.map((function(e,t){return(0,f.jsx)("div",{style:{width:"calc(100%)",padding:5,height:50,position:"relative"},children:(0,f.jsx)("a",{target:"_blank",style:{width:"100%",height:"100%"},href:e.message,rel:"noreferrer",children:(0,f.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",border:"1px solid #e7e7e7",justifyContent:"flex-start",padding:5},className:"c-flex-center",children:e.name_file})})},t)}))]})]})},kn=function(){var e=(0,d.UO)().idConversation,t=(0,o.useState)(),n=(0,r.Z)(t,2),i=n[0],s=n[1],a=(0,o.useState)(!1),l=(0,r.Z)(a,2),u=l[0],c=l[1],v=(0,o.useState)(!1),h=(0,r.Z)(v,2),p=h[0],j=h[1],x=(0,o.useState)(!1),m=(0,r.Z)(x,2),g=m[0],k=m[1],y=(0,o.useState)(""),Z=(0,r.Z)(y,2),b=Z[0],w=Z[1],C=(0,o.useState)(!1),_=(0,r.Z)(C,2),N=_[0],I=_[1],S=(0,o.useState)(!1),B=(0,r.Z)(S,2),P=B[0],T=B[1],z=(0,o.useContext)(q).socketState;return(0,o.useEffect)((function(){z.emit("join_room_conversation",{roomId:e})}),[z,e]),(0,o.useEffect)((function(){Y(e,s)}),[e,u]),(0,o.useEffect)((function(){z.on("decline_call_signal",(function(e){k((function(){return!1}))}))}),[z]),(0,o.useEffect)((function(){z.on("accept_call_signal",(function(e){w(null===e||void 0===e?void 0:e.call_id),k((function(){return!0}))}))}),[z]),(0,o.useEffect)((function(){z.on("end_call_from_user",(function(e){k((function(){return!1}))}))}),[z]),(0,f.jsxs)("div",{className:"fkdjkfjkdlsasa",style:{display:"flex"},children:[(0,f.jsx)(ln,{is_chat_page:!0,isCall:g}),!0===g&&(0,f.jsx)(mn,{channelName:b,video:N,audio:P}),(0,f.jsx)(Yt,{setCallId:w,isCall:g,setIsCall:k,setExtend:j,setChange:c,conversation:i,setVideo:I,setAudio:T}),!0===p&&(0,f.jsx)(gn,{})]})},yn=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:"".concat(x.LB,"/api/users/get-list-user-send-request-add-friend-of-me/").concat(j.Z.get("uid")),method:"get",headers:{authorization:"Bearer "+j.Z.get("accessToken")}});case 2:return n=e.sent,e.next=5,n.data;case 5:return s=e.sent,e.abrupt("return",t(s));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Zn=yn,bn=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:x.LB+"/api/users/get/user/request-make-friend/to/me/"+j.Z.get("uid"),method:"get",headers:{authorization:"Bearer "+j.Z.get("accessToken")}});case 2:return n=e.sent,e.next=5,n.data;case 5:return s=e.sent,e.abrupt("return",t(s));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wn=bn,Cn=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n){var s,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:"".concat(x.LB,"/api/users/update_seen_request/").concat(t),method:"post",headers:{authorization:"Bearer ".concat(j.Z.get("accessToken"))},data:{un_seen:n}});case 2:return s=e.sent,e.next=5,s.data;case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_n=Cn,Nn=function(e){var t,n,i,s=(0,o.useState)((function(){return[]})),a=(0,r.Z)(s,2),d=a[0],l=a[1],u=(0,o.useState)((function(){return!1})),c=(0,r.Z)(u,2),v=c[0],h=c[1];return(0,o.useEffect)((function(){Zn(l)}),[v]),(0,f.jsxs)("div",{className:"fdjkjskljdkalsjasas",style:{padding:"16px 16px 0 16px"},children:[(0,f.jsx)(Sn,{title:"Danh s\xe1ch y\xeau c\u1ea7u \u0111\u01b0\u1ee3c k\u1ebft b\u1ea1n"}),(null===d||void 0===d||null===(t=d.data)||void 0===t?void 0:t.length)<=0&&(0,f.jsx)("div",{style:{textAlign:"center"},children:"Kh\xf4ng c\xf3 ng\u01b0\u1eddi n\xe0o trong danh s\xe1ch n\xe0y"}),(null===d||void 0===d||null===(n=d.data)||void 0===n?void 0:n.length)>0&&(null===d||void 0===d||null===(i=d.data)||void 0===i?void 0:i.map((function(e,t){return(0,o.createElement)(Bn,(0,D.Z)((0,D.Z)({},e),{},{key:t,setChange:h}))})))]})},In=function(e){var t,n,i,s,a,d,l=(0,o.useState)((function(){return[]})),u=(0,r.Z)(l,2),c=u[0],v=u[1],h=(0,o.useState)((function(){return!1})),p=(0,r.Z)(h,2),x=p[0],m=p[1];return(0,o.useEffect)((function(){_n(j.Z.get("uid"),0)}),[]),(0,o.useEffect)((function(){wn(v)}),[x]),(0,f.jsxs)("div",{className:"fjsdhukdhjaeshdnasas",style:{padding:"16px 16px 0 16px"},children:[(0,f.jsx)(Sn,{title:"Danh s\xe1ch y\xeau c\u1ea7u k\u1ebft b\u1ea1n"}),(null===c||void 0===c||null===(t=c.data)||void 0===t||null===(n=t.friendsQueue)||void 0===n?void 0:n.length)<=0&&(0,f.jsx)("div",{style:{textAlign:"center"},children:"Kh\xf4ng c\xf3 ng\u01b0\u1eddi n\xe0o trong danh s\xe1ch n\xe0y"}),(null===c||void 0===c||null===(i=c.data)||void 0===i||null===(s=i.friendsQueue)||void 0===s?void 0:s.length)>0&&(null===c||void 0===c||null===(a=c.data)||void 0===a||null===(d=a.friendsQueue)||void 0===d?void 0:d.map((function(e,t){return(0,o.createElement)(Pn,(0,D.Z)((0,D.Z)({},e),{},{key:t,setChange:m}))})))]})},Sn=function(e){return(0,f.jsx)("div",{style:{height:50,display:"flex",alignItems:"center",fontSize:20,fontWeight:600},children:e.title})},Bn=function(e){return(0,f.jsx)("div",{className:"dskjdsakldjskdlasasas",style:{width:"100%",padding:16},children:(0,f.jsxs)("div",{className:"fjkldjskldjassa",style:{width:"100%",padding:10,background:"#f2f0f5",display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:5},children:[(0,f.jsxs)("div",{className:"fsjkdajdkjfkdajsdas",style:{display:"flex",justifyContent:"center",alignItems:"center",gap:10},children:[(0,f.jsx)("img",{src:(null===e||void 0===e?void 0:e.profilePicture)||"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png",alt:"",style:{width:48,height:48,objectFit:"cover",borderRadius:"50%"}}),(0,f.jsxs)("div",{className:"fdjkldjksldjaksdjsf",children:[(0,f.jsx)("div",{className:"fkjldjskjdasaas",style:{marginBottom:8},children:null===e||void 0===e?void 0:e.username}),(0,f.jsx)("div",{children:"B\u1ea1n \u0111\xe3 g\u1eedi l\u1eddi m\u1eddi k\u1ebft b\u1ea1n cho ng\u01b0\u1eddi n\xe0y"})]})]}),(0,f.jsx)("div",{className:"fjdakdsjkgfjksdd",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,f.jsx)(S.Z,{onClick:function(){return Ut(null===e||void 0===e?void 0:e._id,null===e||void 0===e?void 0:e.setChange)},color:"primary",variant:"secondary",children:"H\u1ee7y y\xeau c\u1ea7u"})})]})})},Pn=function(e){var t=(0,o.useState)(""),n=(0,r.Z)(t,2),i=n[0],s=n[1];return(0,f.jsx)("div",{className:"dskjdsakldjskdlasasas",style:{width:"100%",padding:16},children:(0,f.jsxs)("div",{className:"fjkldjskldjassa",style:{width:"100%",padding:10,background:"#f2f0f5",display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:5},children:[(0,f.jsxs)("div",{className:"fsjkdajdkjfkdajsdas",style:{display:"flex",justifyContent:"center",alignItems:"center",gap:10},children:[(0,f.jsx)("img",{src:(null===e||void 0===e?void 0:e.profilePicture)||"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png",alt:"",style:{width:48,height:48,objectFit:"cover",borderRadius:"50%"}}),(0,f.jsxs)("div",{className:"fdjkldjksldjaksdjsf",children:[(0,f.jsx)("div",{className:"fkjldjskjdasaas",style:{marginBottom:8},children:null===e||void 0===e?void 0:e.username}),(0,f.jsxs)("div",{children:[(null===i||void 0===i?void 0:i.length)<=0&&"\u0110\xe3 g\u1eedi l\u1eddi m\u1eddi k\u1ebft b\u1ea1n \u0111\u1ebfn b\u1ea1n",(null===i||void 0===i?void 0:i.length)>0&&i]})]})]}),(0,f.jsx)("div",{className:"fjdakdsjkgfjksdd",style:{display:"flex",justifyContent:"center",alignItems:"center",gap:16},children:(null===i||void 0===i?void 0:i.length)<=0&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(S.Z,{onClick:function(){return Gt(null===e||void 0===e?void 0:e._id,s)},color:"primary",variant:"primary",children:"Ch\u1ea5p nh\u1eadn"}),(0,f.jsx)(S.Z,{onClick:function(){return Vt(null===e||void 0===e?void 0:e._id,s)},color:"primary",variant:"secondary",children:"T\u1eeb ch\u1ed1i"})]})})]})})},Tn=function(e){return(0,f.jsxs)("div",{className:"fkjsdkljdsaklasjas",style:{display:"flex"},children:[(0,f.jsx)(ln,{is_friend_page:!0}),(0,f.jsx)("div",{style:{flex:" 1 1 0"},className:"fnjkdhjsjhdslkjsas",children:(0,f.jsxs)(d.Z5,{children:[(0,f.jsx)(d.AW,{path:"/",element:(0,f.jsx)(d.Fg,{replace:!0,to:"/friends/request/to/me"})}),(0,f.jsx)(d.AW,{path:"/request/by/me",element:(0,f.jsx)(Nn,{})}),(0,f.jsx)(d.AW,{path:"/request/to/me",element:(0,f.jsx)(In,{})})]})})]})},zn=function(){var e=(0,o.useContext)(Kn),t=e.auth,n=e.data;return(0,f.jsx)("div",{className:"fdjkdaklsklasasas",style:{flex:"1 1 0",height:"100vh",maxHeight:"100vh"},children:(0,f.jsxs)(d.Z5,{children:[(0,f.jsx)(d.AW,{path:"/*",element:(0,f.jsx)(d.Fg,{to:"/",replace:!0})}),(null===n||void 0===n?void 0:n.lastConversationId)&&(0,f.jsx)(f.Fragment,{children:!0===t&&(0,f.jsx)(d.AW,{path:"/",element:(0,f.jsx)(d.Fg,{to:"/chat/"+(null===n||void 0===n?void 0:n.lastConversationId),replace:!0})})}),!(null!==n&&void 0!==n&&n.lastConversationId)&&(0,f.jsx)(f.Fragment,{children:!0===t&&(0,f.jsx)(d.AW,{path:"/",element:(0,f.jsx)(d.Fg,{to:"/chat/",replace:!0})})}),(0,f.jsx)(d.AW,{path:"/chat/:idConversation",element:(0,f.jsx)(kn,{})}),(0,f.jsx)(d.AW,{path:"/friends/*",element:(0,f.jsx)(Tn,{})}),(0,f.jsx)(d.AW,{path:"*",element:(0,f.jsx)(G,{})})]})})},Rn=n(23853),Fn=function(){j.Z.remove("uid"),j.Z.remove("accessToken"),window.location.reload()},An=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.ZP)({url:x.LB+"/api/users/get/last/conversation/"+j.Z.get("uid"),method:"get",headers:{authorization:"Bearer "+j.Z.get("accessToken")}});case 2:return n=e.sent,e.next=5,n.data;case 5:return s=e.sent,e.abrupt("return",t(s));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ln=An,On=function(){var e=(0,o.useState)(),t=(0,r.Z)(e,2),n=t[0],i=t[1],s=(0,d.s0)();return(0,o.useEffect)((function(){Ln(i)}),[]),(0,f.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",padding:"20px"},children:(0,f.jsx)("div",{onClick:function(){return s("/chat/"+(null===n||void 0===n?void 0:n.lastConversationId)||0)},title:"Chat",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,f.jsx)(l.Zs0,{color:"#fff",style:{width:32,height:32,color:"#fff",cursor:"pointer"}})})})},En=function(e){var t,n,i,s,a=(0,d.s0)(),l=(0,o.useState)(!1),u=(0,r.Z)(l,2),c=u[0],v=u[1];return(0,f.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",padding:"20px"},children:(0,f.jsxs)("div",{onClick:function(){a("/friends"),v((function(){return!0})),_n(j.Z.get("uid"),0),null===e||void 0===e||e.setUnSeenDefault(0),null===e||void 0===e||e.setNewRequestFriends([])},title:(null===e||void 0===e||null===(t=e.newRequestFriends)||void 0===t?void 0:t.length)+(parseInt(null===e||void 0===e?void 0:e.unSeenDefault)||0)>0?"".concat((null===e||void 0===e||null===(n=e.newRequestFriends)||void 0===n?void 0:n.length)+(parseInt(null===e||void 0===e?void 0:e.unSeenDefault)||0)," new request"):"Friends",style:{display:"flex",justifyContent:"center",alignItems:"center",position:"relative"},children:[(0,f.jsx)(Z.wN,{color:"#fff",style:{width:32,height:32,color:"#fff",cursor:"pointer"}}),!1===c&&(0,f.jsx)(f.Fragment,{children:parseInt(null===e||void 0===e||null===(i=e.newRequestFriends)||void 0===i?void 0:i.length)+(parseInt(null===e||void 0===e?void 0:e.unSeenDefault)||0)>0&&(0,f.jsx)("div",{style:{position:"absolute",top:"-50%",right:"-50%",backgroundColor:"red",width:24,height:24,borderRadius:"50%",color:"#fff"},className:"c-flex-center",children:(null===e||void 0===e||null===(s=e.newRequestFriends)||void 0===s?void 0:s.length)+(parseInt(null===e||void 0===e?void 0:e.unSeenDefault)||0)})})]})})},Mn=function(e){return(0,f.jsx)("div",{className:"dsjdkjfkdlfjdmskdgm",style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",left:0,top:0,background:"rgba(0, 0, 0, 0.3)",zIndex:10},children:(0,f.jsx)(J.default,{onOutsideClick:function(){return null===e||void 0===e?void 0:e.setOpen((function(){return!1}))},children:(0,f.jsxs)("div",{className:"DSkkjfkdjskljfdas",style:{maxWidth:300,width:"100vw",background:"#fff",padding:10,borderRadius:10},children:[(0,f.jsxs)("div",{className:"jdjadkjgkddssa",style:{width:"100%",height:68,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,f.jsx)("strong",{children:"C\xe0i \u0111\u1eb7t"}),(0,f.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},onClick:function(){return e.setOpen((function(){return!1}))},children:(0,f.jsx)($.nfZ,{})})]}),(0,f.jsx)("div",{onClick:function(){return Fn()},style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:8},children:(0,f.jsxs)(S.Z,{className:"fjsdhkjhjkdsdsafdda",variant:"outline-primary",children:[(0,f.jsx)(Rn.xqh,{style:{color:"#2e89ff"}}),"\xa0\u0110\u0103ng xu\u1ea5t"]})}),(0,f.jsx)("div",{onClick:function(){},style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,f.jsxs)(S.Z,{onClick:function(){F()("Th\xf4ng b\xe1o","Ch\u1ee9c n\u0103ng \u0111ang \u0111\u01b0\u1ee3c ph\xe1t tri\u1ec3n","error")},className:"fjsdhkjhjkdsdsafdda",variant:"outline-danger",children:[(0,f.jsx)(Rn.xqh,{style:{color:"#fff"}}),"\xa0X\xf3a t\xe0i kho\u1ea3n"]})})]})})})},Dn=function(){return(0,f.jsx)("div",{title:"reload",style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",padding:"20px"},children:(0,f.jsx)("div",{onClick:function(){return window.location.reload()},style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,f.jsx)(l.V9Z,{color:"#fff",style:{width:32,height:32,color:"#fff",cursor:"pointer"}})})})},Wn=function(){var e=(0,o.useState)((function(){return!1})),t=(0,r.Z)(e,2),n=t[0],i=t[1],s=(0,o.useState)((function(){return!1})),a=(0,r.Z)(s,2),d=a[0],l=a[1],u=(0,o.useContext)(Kn).data,c=(0,o.useContext)(q).socketState,v=(0,o.useState)(null===u||void 0===u?void 0:u.seenRequest),h=(0,r.Z)(v,2),p=h[0],x=h[1],m=(0,o.useState)([]),g=(0,r.Z)(m,2),k=g[0],y=g[1];(0,o.useEffect)((function(){return window.addEventListener("beforeunload",Z),function(){window.removeEventListener("beforeunload",Z)}})),(0,o.useEffect)((function(){null===c||void 0===c||c.on("new_request_friend",(function(e){j.Z.get("uid")===(null===e||void 0===e?void 0:e.destination_user_id)&&y((function(t){return He().set([].concat((0,X.Z)(t),[null===e||void 0===e?void 0:e.sender_user_id]))}))}))}),[c]);var Z=function(e){e.preventDefault(),_n(j.Z.get("uid"),parseInt(k.length)+p)};return(0,f.jsx)("div",{className:"dkdjakdjskdasadsd",style:{height:"100vh",width:80},children:(0,f.jsxs)("div",{className:"dsjkdjaksljkfada",style:{width:"100%",height:"100%",background:"#2e89ff",padding:"10px 0",display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"column"},children:[(0,f.jsxs)("div",{children:[(0,f.jsx)(fe,{setOpen:i,avatar:null===u||void 0===u?void 0:u.profilePicture}),!0===n&&(0,f.jsx)(Te,{open:n,setOpen:i}),(0,f.jsx)(On,{}),(0,f.jsx)(En,{newRequestFriends:k,setNewRequestFriends:y,unSeenDefault:p,setUnSeenDefault:x}),(0,f.jsx)(Dn,{})]}),(0,f.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,f.jsx)("div",{onClick:function(){return l((function(){return!0}))},style:{display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},className:"fjldjsgjkjdklgjklrsd",children:(0,f.jsx)(Rn.nbt,{style:{color:"#fff",width:32,height:32}})}),d&&(0,f.jsx)(Mn,{open:d,setOpen:l})]})]})})},qn=(0,o.createContext)(),Un=function(e){var t=(0,o.useContext)(q).socketState,n=(0,o.useContext)(Kn),i=n.data,s=n.setChange,a=(0,o.useState)(!1),d=(0,r.Z)(a,2),l=d[0],u=d[1],c=(0,o.useState)(),v=(0,r.Z)(c,2),h=v[0],p=v[1],x=(0,o.useState)(),m=(0,r.Z)(x,2),g=m[0],k=m[1];return(0,o.useEffect)((function(){null===t||void 0===t||t.emit("join_room_self",{meId:j.Z.get("uid")})}),[t]),(0,o.useEffect)((function(){null!==i&&void 0!==i&&i._id&&(null===t||void 0===t||t.emit("joinUser",{user:i}))}),[t,i]),(0,o.useEffect)((function(){null===t||void 0===t||t.on("signal_to_user",(function(e){(null===e||void 0===e?void 0:e.user_to_call)===(null===i||void 0===i?void 0:i._id)&&(t.emit("receiver_to_call",{call_id:e.call_id}),u((function(){return!0})),k((function(){return e.call_id})),p(e.senderInfo))}))}),[t,null===i||void 0===i?void 0:i._id]),(0,o.useEffect)((function(){null===t||void 0===t||t.on("update_profile_user_on",(function(e){s((function(e){return!e}))}))}),[t]),(0,f.jsx)(qn.Provider,{value:{setInComingCall:u,inComingCall:l},children:(0,f.jsxs)("div",{className:"ajdkasjkdjfaesas",style:{width:"100%"},children:[(0,f.jsxs)("div",{className:"djasjkfjkejamwlawas",style:{width:"100%",display:"flex",alignItems:"center"},children:[(0,f.jsx)(Wn,{}),(0,f.jsx)(zn,{})]}),!0===l&&(0,f.jsx)(H,(0,D.Z)((0,D.Z)({},h),{},{setInComingCall:u,call_id:g}))]})})},Hn=function(e){var t=e.children;return(0,f.jsx)(U,{children:t})};function Gn(){return(0,d.TH)().pathname.startsWith("/media")}var Kn=(0,o.createContext)(),Vn=function(){var e=(0,o.useState)(),t=(0,r.Z)(e,2),n=t[0],l=t[1],u=(0,o.useState)(),c=(0,r.Z)(u,2),v=c[0],h=c[1],p=(0,o.useState)(!1),m=(0,r.Z)(p,2),g=m[0],k=m[1];return(0,o.useEffect)((function(){(0,s.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j.Z.get("uid")){e.next=11;break}return e.next=3,(0,a.ZP)({url:"".concat(x.LB,"/api/users/").concat(j.Z.get("uid")),headers:{Authorization:"Bearer ".concat(j.Z.get("accessToken"))},method:"get",params:{id:j.Z.get("uid")}});case 3:return t=e.sent,e.next=6,t.data;case 6:return n=e.sent,200===t.status?h((function(){return!0})):h((function(){return!1})),e.abrupt("return",l(n));case 11:h((function(){return!1}));case 12:case"end":return e.stop()}}),e)})))()}),[g]),(0,f.jsx)(Hn,{children:(0,f.jsx)(Kn.Provider,{value:{data:n,auth:v,setData:l,setChange:k},children:(0,f.jsxs)(d.Z5,{children:[!0===v&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(d.AW,{path:"/*",element:(0,f.jsx)(Un,{})}),(0,f.jsx)(d.AW,{path:"/signup",element:(0,f.jsx)(d.Fg,{to:"/"})}),(0,f.jsx)(d.AW,{path:"/login",element:(0,f.jsx)(d.Fg,{to:"/"})}),(0,f.jsx)(d.AW,{path:"*",element:(0,f.jsx)(G,{})})]}),!1===v&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(d.AW,{path:"/*",element:(0,f.jsx)(d.Fg,{to:"/login"})}),(0,f.jsx)(d.AW,{path:"/signup",element:(0,f.jsx)(E,{})}),(0,f.jsx)(d.AW,{path:"/login",element:(0,f.jsx)(y,{})}),(0,f.jsx)(d.AW,{path:"/forgot-password",element:(0,f.jsx)(O,{})}),(0,f.jsx)(d.AW,{path:"*",element:(0,f.jsx)(G,{})})]})]})})})}}}]);
//# sourceMappingURL=680.cf447d93.chunk.js.map